"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[88],{44088:function(e,t,l){l.r(t),l.d(t,{default:function(){return W}});l(62953),l(44114),l(58335);var i=l(95976),a=l(10160),o=l(12040),n=l(39053),s=l(37868),u=l(86635),r=l(51449),v=l(93336),d=l(51884),c=l(53620),m={class:"my-group"},p={class:"my-title-box"},L={class:"input-box"},k={class:"my-group"},g={class:"my-title-box"},C={class:"input-box"},f={class:"my-group"},h={class:"my-title-box"},y={class:"input-box"},b={class:"agree-proto-box"},P={class:"submitBtn"},_={class:"pop-wrap"},R={class:"pop-btn"},S={class:"cm-popup-wrap"},M={class:"cm-popup-content"},F={class:"cm-row-thre-title"},T={class:"cm-popup-foot"},A={__name:"CertificateLimitSetting",setup(e){var t=(0,o.KR)(!1),l=(0,o.KR)({}),{state:A,commit:w}=(0,r.Pj)(),N=(0,i.EW)(()=>A.transferSetting.transferLimitSetting),W=(0,i.EW)(()=>A.transferSetting.certLimitRequest),x=(0,n.rd)(),D=(0,o.KR)(""),U=(0,o.KR)(""),I=(0,o.KR)(""),B=(0,o.KR)(!1),q=(0,o.KR)(),V=(0,i.EW)(()=>{var e;return null===(e=q.value)||void 0===e?void 0:e.AuthType}),K=(0,o.KR)(!1),O=(0,o.KR)(""),E=(0,o.KR)(""),j=(0,o.KR)("");(0,i.sV)(()=>{J(),X()});var X=()=>{var e,t,l,i,a,o,n,s;(null===(e=W.value)||void 0===e||null===(e=e.MC_LimitPerTrs)||void 0===e?void 0:e.length)>0?D.value=W.value.MC_LimitPerTrs:D.value=null===(i=N.value)||void 0===i?void 0:i.MC_LimitPerTrs;(null===(t=W.value)||void 0===t||null===(t=t.MC_LimitPerDay)||void 0===t?void 0:t.length)>0?U.value=null===(a=W.value)||void 0===a?void 0:a.MC_LimitPerDay:U.value=null===(o=N.value)||void 0===o?void 0:o.MC_LimitPerDay;(null===(l=W.value)||void 0===l||null===(l=l.MC_LimitWithoutPinPerTrs)||void 0===l?void 0:l.length)>0?I.value=null===(n=W.value)||void 0===n?void 0:n.MC_LimitWithoutPinPerTrs:I.value=null===(s=N.value)||void 0===s?void 0:s.MC_LimitWithoutPinPerTrs},J=()=>{var e,t=navigator.userAgent.indexOf("Qzccbank")>-1;t?u.sendNativeInstrution("getUserAllData",{},e=>{var t=JSON.parse(e);if("true"==(null===t||void 0===t?void 0:t.NetBankLoginStatus)){var l=null===t||void 0===t?void 0:t.netBankLoginInfo;q.value=l}}):q.value=null===(e=A.user)||void 0===e?void 0:e.pwebUser},z=(0,i.EW)(()=>{var e,t,l;return B.value&&(null===(e=D.value)||void 0===e?void 0:e.length)>0&&(null===(t=U.value)||void 0===t?void 0:t.length)>0&&(null===(l=I.value)||void 0===l?void 0:l.length)>0}),Y=(0,o.KR)(!1),G=()=>{D.value=""},Q=()=>{U.value=""},$=()=>{I.value=""},H=()=>{ee(),B.value=!B.value,x.push({path:"/Negotias"})},Z=()=>{z.value&&("1"==V.value||"7"==V.value?(Y.value=!0,ee()):"3"==V.value?d.l.alert({message:"当前暂不支持该认证方式(蓝牙Ukey)"}).then({}):d.l.alert({message:"暂不支持该认证方式"}).then({}))},ee=()=>{var e,t,l,i,a,o,n,s,u;w("transferSetting/setCertLimitRequestParms",["C_LimitPerTrs",null===(e=N.value)||void 0===e?void 0:e.C_LimitPerTrs]),w("transferSetting/setCertLimitRequestParms",["C_LimitPerDay",null===(t=N.value)||void 0===t?void 0:t.C_LimitPerDay]),w("transferSetting/setCertLimitRequestParms",["S_LimitPerTrs",null===(l=N.value)||void 0===l?void 0:l.S_LimitPerTrs]),w("transferSetting/setCertLimitRequestParms",["S_LimitPerDay",null===(i=N.value)||void 0===i?void 0:i.S_LimitPerDay]),w("transferSetting/setCertLimitRequestParms",["LimitTimesPerDay",null===(a=N.value)||void 0===a?void 0:a.LimitTimesPerDay]),w("transferSetting/setCertLimitRequestParms",["LimitPerYear",null===(o=N.value)||void 0===o?void 0:o.LimitPerYear]),w("transferSetting/setCertLimitRequestParms",["MC_LimitPerDay",U.value]),w("transferSetting/setCertLimitRequestParms",["MC_LimitPerTrs",D.value]),w("transferSetting/setCertLimitRequestParms",["MC_LimitWithoutPinPerTrs",I.value]),w("transferSetting/setCertLimitRequestParms",["OldMCLimitPerTrs",null===(n=N.value)||void 0===n?void 0:n.MC_LimitPerTrs]),w("transferSetting/setCertLimitRequestParms",["OldMCLimitPerDay",null===(s=N.value)||void 0===s?void 0:s.MC_LimitPerDay]),w("transferSetting/setCertLimitRequestParms",["OldMCLimitWithoutPinPerTrs",null===(u=N.value)||void 0===u?void 0:u.MC_LimitWithoutPinPerTrs])},te=()=>{le("1"),ie()},le=e=>{w("transferSetting/setCertLimitRequestParms",["AuthType",e])},ie=()=>{s.U2({SceneCode:"MobileUsrActLimitMng",s:A.transferSetting.PayegisDID}).then(e=>{ae(null===e||void 0===e?void 0:e.BussNo)})},ae=e=>{var i,a=e;s.w2({SceneCode:"MobileUsrActLimitMng",BussNo:a,s:A.transferSetting.PayegisDID,TransFaceCode:"xgxe",MC_LimitPerTrs:D.value,OldMCLimitPerTrs:null===(i=N.value)||void 0===i?void 0:i.MC_LimitPerTrs}).then(e=>{if(e){null!==e&&void 0!==e&&e.BussNo&&(a=e.BussNo,E.value=a),w("transferSetting/setCertLimitRequestParms",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setCertLimitRequestParms",["BussNo",a]);var i=(null===e||void 0===e?void 0:e.WarningMsg)||"您的交易存在风险，为了进一步保护您的账户安全，请您谨慎操作！";if(j.value=null===e||void 0===e?void 0:e.AuthFlag,"0"==(null===e||void 0===e?void 0:e.AuthFlag))oe(i);else if("1"==(null===e||void 0===e?void 0:e.AuthFlag)){var o=null===e||void 0===e?void 0:e.AuthCountryCode,n=null===e||void 0===e?void 0:e.AuthCifName,s=null===e||void 0===e?void 0:e.AuthBirthDate;l.value={AuthCountryCode:o,AuthCifName:n,AuthBirthDate:s},t.value=!1}else"2"==(null===e||void 0===e?void 0:e.AuthFlag)?oe(i):"3"==(null===e||void 0===e?void 0:e.AuthFlag)?se():c.log("failed....")}})},oe=e=>{O.value=e,K.value=!0},ne=()=>{K.value=!1,u.sendNativeInstrution("identityCheck",{SceneCode:"MobileUsrActLimitMng",BussNo:E.value},e=>{var t,l=JSON.parse(e);w("transferSetting/setCertLimitRequestParms",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setCertLimitRequestParms",["BussNo",E.value]),(null===Object||void 0===Object||null===(t=Object.keys(l))||void 0===t?void 0:t.length)>0&&"000000"==(null===l||void 0===l?void 0:l.rtnCode)?se():c.log("user cancel..")})},se=()=>{W.value.s=A.transferSetting.PayegisDID,W.value.TransFaceCode="xgxe";try{s.GL(W.value).then(e=>{e&&"000000"!=e&&(K.value=!1,Y.value=!1,x.push({path:"/SMSVerification",query:{limitType:"certifi"}}))})}catch(e){c.log("err:",e)}};return(e,o)=>{var n=(0,i.g2)("van-icon"),s=(0,i.g2)("van-field"),u=(0,i.g2)("van-cell"),r=(0,i.g2)("van-cell-group"),d=(0,i.g2)("van-checkbox"),c=(0,i.g2)("van-button"),A=(0,i.g2)("van-popup"),w=(0,i.g2)("content-box");return(0,i.uX)(),(0,i.Wv)(w,{class:"container",title:"转账限额设置"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",m,[(0,i.bF)(r,null,{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(u,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",p,[o[11]||(o[11]=(0,i.Lk)("div",{class:"title"},"单笔转账限额",-1)),(0,i.Lk)("div",L,[(0,i.bF)(s,{modelValue:D.value,"onUpdate:modelValue":o[0]||(o[0]=e=>D.value=e),placeholder:"单笔转账限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(n,{name:"close",onClick:G,class:(0,a.C4)({hidden:(null===(e=D.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...o[12]||(o[12]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(u,{title:"单笔转账限额:"+(null===(e=N.value)||void 0===e?void 0:e.MC_LimitPerTrs)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",k,[(0,i.bF)(r,{class:"my-group"},{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(u,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",g,[o[13]||(o[13]=(0,i.Lk)("div",{class:"title"},"日累计限额",-1)),(0,i.Lk)("div",C,[(0,i.bF)(s,{modelValue:U.value,"onUpdate:modelValue":o[1]||(o[1]=e=>U.value=e),placeholder:"日累计限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(n,{name:"close",onClick:Q,class:(0,a.C4)({hidden:(null===(e=U.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...o[14]||(o[14]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(u,{title:"日累计转账限额:"+(null===(e=N.value)||void 0===e?void 0:e.MC_LimitPerDay)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",f,[(0,i.bF)(r,{class:"my-group"},{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(u,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",h,[o[15]||(o[15]=(0,i.Lk)("div",{class:"title"},"单笔免密限额",-1)),(0,i.Lk)("div",y,[(0,i.bF)(s,{modelValue:I.value,"onUpdate:modelValue":o[2]||(o[2]=e=>I.value=e),placeholder:"单笔免密限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(n,{name:"close",onClick:$,class:(0,a.C4)({hidden:(null===(e=I.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...o[16]||(o[16]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(u,{title:"单笔免密限额:"+(null===(e=N.value)||void 0===e?void 0:e.MC_LimitWithoutPinPerTrs)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",b,[(0,i.bF)(d,{name:"1",modelValue:B.value,"onUpdate:modelValue":o[3]||(o[3]=e=>B.value=e)},{default:(0,i.k6)(()=>[o[17]||(o[17]=(0,i.eW)("我已阅读并同意 ",-1)),(0,i.Lk)("span",{class:"protocol-text",onClick:H}," 《泉州银行电子银行个人客户服务协议》 ")]),_:1},8,["modelValue"])]),(0,i.Lk)("div",P,[(0,i.bF)(c,{type:"primary","native-type":"submit",disabled:!z.value,onClick:Z},{default:(0,i.k6)(()=>[...o[18]||(o[18]=[(0,i.eW)(" 修改限额 ",-1)])]),_:1},8,["disabled"])]),(0,i.bF)(A,{show:Y.value,"onUpdate:show":o[4]||(o[4]=e=>Y.value=e),round:"",closeable:"","close-on-click-overlay":!1},{default:(0,i.k6)(()=>[(0,i.Lk)("div",_,[o[20]||(o[20]=(0,i.Lk)("div",{class:"pop-title"},"需先进行认证验证",-1)),o[21]||(o[21]=(0,i.Lk)("div",{class:"pop-subtitle"},"请选择认证方式",-1)),(0,i.Lk)("div",R,[(0,i.bF)(c,{plain:"",type:"primary",block:"",onClick:te},{default:(0,i.k6)(()=>[...o[19]||(o[19]=[(0,i.eW)(" 手机短信 ",-1)])]),_:1})])])]),_:1},8,["show"]),(0,i.bF)(A,{show:K.value,"onUpdate:show":o[8]||(o[8]=e=>K.value=e),position:"center",round:"",style:{width:"80%"},onCancel:o[9]||(o[9]=e=>K.value=!1)},{default:(0,i.k6)(()=>[(0,i.Lk)("div",S,[o[25]||(o[25]=(0,i.Lk)("div",{class:"cm-popup-title"},"风险提示",-1)),(0,i.Lk)("div",M,[(0,i.Lk)("div",F,(0,a.v_)(O.value),1)]),(0,i.Lk)("div",T,[(0,i.bF)(c,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:o[5]||(o[5]=e=>K.value=!1)},{default:(0,i.k6)(()=>[...o[22]||(o[22]=[(0,i.eW)(" 取消 ",-1)])]),_:1}),"2"==j.value?((0,i.uX)(),(0,i.Wv)(c,{key:0,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:o[6]||(o[6]=e=>se())},{default:(0,i.k6)(()=>[...o[23]||(o[23]=[(0,i.eW)(" 继续交易 ",-1)])]),_:1})):((0,i.uX)(),(0,i.Wv)(c,{key:1,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:o[7]||(o[7]=e=>ne())},{default:(0,i.k6)(()=>[...o[24]||(o[24]=[(0,i.eW)(" 身份核验 ",-1)])]),_:1}))]),o[26]||(o[26]=(0,i.Lk)("div",{class:"cm-popup-foot marginRow10",style:{"text-align":"left"}}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"]),(0,i.bF)(v.A,{showRemoteBankNotice:t.value,userInfo:l.value,transCode:"MobileUsrActLimitMng",onClose:o[10]||(o[10]=e=>t.value=!1)},null,8,["showRemoteBankNotice","userInfo"])]),_:1})}}},w=l(1169);const N=(0,w.A)(A,[["__scopeId","data-v-9f9ddda0"]]);var W=N},93336:function(e,t,l){l.d(t,{A:function(){return v}});l(62953),l(58335);var i=l(95976),a=l(12040),o=l(53620),n={class:"cm-popup-wrap"},s={class:"cm-popup-foot"},u={__name:"RemoteBank",props:{userInfo:{type:Object,default:()=>({})},transCode:{type:String,default:""},showRemoteBankNotice:{type:Boolean,default:!1}},emits:["close"],setup(e,t){var{emit:l}=t,u=l,{appContext:r}=(0,i.nI)(),{$qzbankBridge:v}=r.config.globalProperties,d=()=>{u("close")},c=e,m=(0,i.EW)(()=>c.showRemoteBankNotice),p=(0,a.KR)();(0,i.sV)(()=>{v.sendNativeInstrution("getUserAllData",{},e=>{p.value=JSON.parse(e)})});var L=(0,i.EW)(()=>{var e,t,l,i;return""!==(null===(e=p.value)||void 0===e?void 0:e.ycyhVersion)?"/client/mobile/index.html#/fileView?\n          transCode=".concat(encodeURIComponent("V03007"),"&transName=").concat(encodeURIComponent("身份核查"),"\n          &customerName=").concat(encodeURIComponent(null===(t=c.userInfo)||void 0===t?void 0:t.AuthCifName),"&countryCode=").concat(null===(l=c.userInfo)||void 0===l?void 0:l.AuthCountryCode,"\n          &businessType=").concat(encodeURIComponent(c.transCode),"&birthDay=").concat(encodeURIComponent(null===(i=c.userInfo)||void 0===i?void 0:i.AuthBirthDate),"\n          &transCheckName=").concat(encodeURIComponent("港澳台、中国护照客户身份核验"),"\n          "):(o.log("不支持核验"),"")}),k=()=>{var e={type:"2",url:L.value};v.sendNativeInstrution("toRemoteBank",e,()=>{o.log("remote data")})};return(e,t)=>{var l=(0,i.g2)("van-button"),a=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.Wv)(a,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e),position:"center",round:"",style:{width:"80%"},onCancel:d},{default:(0,i.k6)(()=>[(0,i.Lk)("div",n,[t[4]||(t[4]=(0,i.Lk)("div",{class:"cm-popup-title"},"温馨提示",-1)),t[5]||(t[5]=(0,i.Lk)("div",{class:"cm-popup-content"},[(0,i.Lk)("div",{class:"cm-row-thre-title"}," 您当前的交易存在风险，请您准备好有效证件，并点击下方呼叫按钮进行身份核查。 ")],-1)),(0,i.Lk)("div",s,[(0,i.bF)(l,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:d},{default:(0,i.k6)(()=>[...t[2]||(t[2]=[(0,i.eW)(" 关闭 ",-1)])]),_:1}),(0,i.bF)(l,{type:"primary",class:"cm-foot-btn-normal",block:"",onClick:t[0]||(t[0]=e=>k())},{default:(0,i.k6)(()=>[...t[3]||(t[3]=[(0,i.eW)(" 呼叫客服 ",-1)])]),_:1})]),t[6]||(t[6]=(0,i.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"])}}};const r=u;var v=r}}]);