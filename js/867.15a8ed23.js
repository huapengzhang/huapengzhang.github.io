"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[867],{8867:function(e,t,a){a.r(t),a.d(t,{default:function(){return F}});a(62953),a(44114),a(58335);var l=a(95976),i=a(10160),n=a(29746),o=a(12040),s=a(39053),r=a(37868),u=a(86635),v=a(51449),d=a(93336),c=a(51884),m=a(53620),p={class:"my-group"},f={class:"my-title-box"},g={class:"input-box"},k={class:"my-group"},L={class:"my-title-box"},h={class:"input-box"},y={class:"agree-proto-box"},b={class:"submitBtn"},C={class:"pop-wrap"},P={class:"pop-btn"},S={class:"cm-popup-wrap"},T={class:"cm-popup-content"},A={class:"cm-row-thre-title"},_={class:"cm-popup-foot"},N={__name:"TransferLimitSetting",setup(e){var t=(0,o.KR)(!1),a=(0,o.KR)({}),{state:N,commit:w,dispatch:D}=(0,v.Pj)(),F=(0,l.EW)(()=>N.transferSetting.transferLimitSetting),R=(0,l.EW)(()=>N.transferSetting.transferLimit),I=(0,s.rd)(),U=(0,o.KR)(""),x=(0,o.KR)(""),B=(0,o.KR)(!1),W=(0,o.KR)(),V=(0,l.EW)(()=>{var e;return null===(e=W.value)||void 0===e?void 0:e.AuthType}),M=(0,o.KR)(!1),K=(0,o.KR)(""),O=(0,o.KR)(""),Y=(0,o.KR)("");(0,l.sV)(()=>{E(),j()});var E=()=>{var e,t,a=navigator.userAgent.indexOf("Qzccbank")>-1;a?(u.sendNativeInstrution("getUserAllData",{},e=>{var t=JSON.parse(e);if("true"==(null===t||void 0===t?void 0:t.NetBankLoginStatus)){var a=null===t||void 0===t?void 0:t.netBankLoginInfo;W.value=a}}),null!==(e=F.value)&&void 0!==e&&e.LimitTimesPerDay||D("transferSetting/getTransferLimitSetting").then(e=>{var t;m.info("recover:",e),U.value=e.LimitTimesPerDay,x.value=null===(t=F.value)||void 0===t?void 0:t.LimitPerYear}),N.transferSetting.PayegisDID||a&&u.sendNativeInstrution("getPayegisDID",{type:"限额"},e=>{w("transferSetting/setPayegisDID",JSON.parse(e).s)})):W.value=null===(t=N.user)||void 0===t?void 0:t.pwebUser},j=()=>{var e,t,a,l;(null===(e=R.value)||void 0===e||null===(e=e.LimitTimesPerDay)||void 0===e?void 0:e.length)>0?U.value=R.value.LimitTimesPerDay:U.value=null===(a=F.value)||void 0===a?void 0:a.LimitTimesPerDay;(null===(t=R.value)||void 0===t||null===(t=t.LimitPerYear)||void 0===t?void 0:t.length)>0?x.value=R.value.LimitPerYear:x.value=null===(l=F.value)||void 0===l?void 0:l.LimitPerYear;w("transferSetting/setAuthType",V.value)},J=(0,l.EW)(()=>B.value&&U.value.length>0&&x.value.length>0),X=(0,o.KR)(!1),q=()=>{U.value=""},z=()=>{x.value=""},G=()=>{Q(),B.value=!B.value,I.push({path:"/Negotias"})},Q=()=>{var e,t,a;w("transferSetting/setTransferLimitParams",["OldLimitTimesPerDay",null===(e=F.value)||void 0===e?void 0:e.LimitTimesPerDay]),w("transferSetting/setTransferLimitParams",["LimitTimesPerDay",U.value]),w("transferSetting/setTransferLimitParams",["OldLimitPerYear",null===(t=F.value)||void 0===t?void 0:t.LimitPerYear]),w("transferSetting/setTransferLimitParams",["LimitPerYear",x.value]),w("transferSetting/setTransferLimitParams",["TransferLimitFlag","1"]),w("transferSetting/setTransferLimitParams",["C_LimitPerDay",null===(a=F.value)||void 0===a?void 0:a.C_LimitPerDay])},$=()=>{J.value&&("1"==V.value||"7"==V.value?(Q(),X.value=!0):"3"==V.value?c.l.alert({message:"当前暂不支持该认证方式(蓝牙Ukey)"}).then({}):c.l.alert({message:"暂不支持该认证方式"}).then({}))},H=()=>{Z("1"),ee()},Z=e=>{w("transferSetting/setTransferLimitParams",["AuthType",e])},ee=()=>{r.U2({SceneCode:"MobileUsrActLimitMng"}).then(e=>{te(null===e||void 0===e?void 0:e.BussNo)})},te=e=>{var l=e;r.w2({SceneCode:"MobileUsrActLimitMng",BussNo:l,TransFaceCode:"xgxe",s:N.transferSetting.PayegisDID}).then(e=>{if(e){null!==e&&void 0!==e&&e.BussNo&&(l=e.BussNo,O.value=l),w("transferSetting/setTransferLimitParams",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setTransferLimitParams",["BussNo",l]);var i=(null===e||void 0===e?void 0:e.WarningMsg)||"您的交易存在风险，为了进一步保护您的账户安全，请您谨慎操作！";if(Y.value=null===e||void 0===e?void 0:e.AuthFlag,"0"==(null===e||void 0===e?void 0:e.AuthFlag))ae(i);else if("1"==(null===e||void 0===e?void 0:e.AuthFlag)){var n=null===e||void 0===e?void 0:e.AuthCountryCode,o=null===e||void 0===e?void 0:e.AuthCifName,s=null===e||void 0===e?void 0:e.AuthBirthDate;a.value={AuthCountryCode:n,AuthCifName:o,AuthBirthDate:s},t.value=!1}else"2"==(null===e||void 0===e?void 0:e.AuthFlag)?ae(i):"3"==(null===e||void 0===e?void 0:e.AuthFlag)?ie():m.log("failed....")}})},ae=e=>{K.value=e,M.value=!0},le=()=>{M.value=!1,u.sendNativeInstrution("identityCheck",{SceneCode:"MobileUsrActLimitMng",BussNo:O.value},e=>{var t,a=JSON.parse(e);w("transferSetting/setTransferLimitParams",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setTransferLimitParams",["BussNo",O.value]),(null===Object||void 0===Object||null===(t=Object.keys(a))||void 0===t?void 0:t.length)>0&&"000000"==(null===a||void 0===a?void 0:a.rtnCode)?ie():m.log("user cancel..")})},ie=()=>{R.value.s=N.transferSetting.PayegisDID,R.value.TransFaceCode="xgxe";try{r.GL(R.value).then(e=>{e&&"000000"!=e&&(M.value=!1,X.value=!1,I.push({path:"/SMSVerification",query:{limitType:"trans"}}))})}catch(e){m.log("err:",e)}};return(e,o)=>{var s=(0,l.g2)("van-icon"),r=(0,l.g2)("van-field"),u=(0,l.g2)("van-cell"),v=(0,l.g2)("van-cell-group"),c=(0,l.g2)("van-checkbox"),m=(0,l.g2)("van-button"),N=(0,l.g2)("van-popup"),w=(0,l.g2)("content-box");return(0,l.uX)(),(0,l.Wv)(w,{class:"container",title:"转账限额设置"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",p,[(0,l.bF)(v,null,{default:(0,l.k6)(()=>{var e;return[(0,l.bF)(u,{class:"my-cell"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",f,[o[10]||(o[10]=(0,l.Lk)("div",{class:"title"},"日累计笔数",-1)),(0,l.Lk)("div",g,[(0,l.bF)(r,{modelValue:U.value,"onUpdate:modelValue":o[0]||(o[0]=e=>U.value=e),placeholder:"累计笔数",type:"digit"},{"right-icon":(0,l.k6)(()=>{var e;return[(0,l.bF)(s,{name:"close",onClick:q,class:(0,i.C4)({hidden:(null===(e=U.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,l.k6)(()=>[...o[11]||(o[11]=[(0,l.Lk)("div",{class:"unit-text"},"笔",-1)])]),_:1}),(0,l.bF)(u,{title:"日累计转账笔数:"+(null===(e=F.value)||void 0===e?void 0:e.LimitTimesPerDay)+"笔",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,l.Lk)("div",k,[(0,l.bF)(v,{class:"my-group"},{default:(0,l.k6)(()=>{var e;return[(0,l.bF)(u,{class:"my-cell"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",L,[o[12]||(o[12]=(0,l.Lk)("div",{class:"title"},"年累计限额",-1)),(0,l.Lk)("div",h,[(0,l.bF)(r,{modelValue:x.value,"onUpdate:modelValue":o[1]||(o[1]=e=>x.value=e),placeholder:"限额",type:"digit"},{"right-icon":(0,l.k6)(()=>{var e;return[(0,l.bF)(s,{name:"close",onClick:z,class:(0,i.C4)({hidden:(null===(e=x.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,l.k6)(()=>[...o[13]||(o[13]=[(0,l.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,l.bF)(u,{title:"年累计转账限额:"+(null===(e=F.value)||void 0===e?void 0:e.LimitPerYear)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,l.Lk)("div",y,[(0,l.bF)(c,{name:"1",modelValue:B.value,"onUpdate:modelValue":o[2]||(o[2]=e=>B.value=e)},{default:(0,l.k6)(()=>[o[14]||(o[14]=(0,l.eW)("我已阅读并同意 ",-1)),(0,l.Lk)("span",{class:"protocol-text",onClick:G}," 《泉州银行电子银行个人客户服务协议》 ")]),_:1},8,["modelValue"])]),(0,l.Lk)("div",b,[(0,l.bF)(m,{type:"primary","native-type":"submit",disabled:!J.value,onClick:$},{default:(0,l.k6)(()=>[...o[15]||(o[15]=[(0,l.eW)(" 下一步 ",-1)])]),_:1},8,["disabled"])]),(0,l.bF)(N,{show:X.value,"onUpdate:show":o[3]||(o[3]=e=>X.value=e),round:"",closeable:"","close-on-click-overlay":!1},{default:(0,l.k6)(()=>[(0,l.Lk)("div",C,[o[17]||(o[17]=(0,l.Lk)("div",{class:"pop-title"},"需先进行认证验证",-1)),o[18]||(o[18]=(0,l.Lk)("div",{class:"pop-subtitle"},"请选择认证方式",-1)),(0,l.Lk)("div",P,[(0,l.bo)((0,l.bF)(m,{plain:"",type:"primary",block:"",onClick:H},{default:(0,l.k6)(()=>[...o[16]||(o[16]=[(0,l.eW)(" 手机短信 ",-1)])]),_:1},512),[[n.aG,"1"==V.value||"7"==V.value]])])])]),_:1},8,["show"]),(0,l.bF)(N,{show:M.value,"onUpdate:show":o[7]||(o[7]=e=>M.value=e),position:"center",round:"",style:{width:"80%"},onCancel:o[8]||(o[8]=e=>M.value=!1)},{default:(0,l.k6)(()=>[(0,l.Lk)("div",S,[o[22]||(o[22]=(0,l.Lk)("div",{class:"cm-popup-title"},"风险提示",-1)),(0,l.Lk)("div",T,[(0,l.Lk)("div",A,(0,i.v_)(K.value),1)]),(0,l.Lk)("div",_,[(0,l.bF)(m,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:o[4]||(o[4]=e=>M.value=!1)},{default:(0,l.k6)(()=>[...o[19]||(o[19]=[(0,l.eW)(" 取消 ",-1)])]),_:1}),"2"==Y.value?((0,l.uX)(),(0,l.Wv)(m,{key:0,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:o[5]||(o[5]=e=>ie())},{default:(0,l.k6)(()=>[...o[20]||(o[20]=[(0,l.eW)(" 继续交易 ",-1)])]),_:1})):((0,l.uX)(),(0,l.Wv)(m,{key:1,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:o[6]||(o[6]=e=>le())},{default:(0,l.k6)(()=>[...o[21]||(o[21]=[(0,l.eW)(" 身份核验 ",-1)])]),_:1}))]),o[23]||(o[23]=(0,l.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"]),(0,l.bF)(d.A,{showRemoteBankNotice:t.value,userInfo:a.value,transCode:"MobileUsrActLimitMng",onClose:o[9]||(o[9]=e=>t.value=!1)},null,8,["showRemoteBankNotice","userInfo"])]),_:1})}}},w=a(1169);const D=(0,w.A)(N,[["__scopeId","data-v-7b07ef06"]]);var F=D},93336:function(e,t,a){a.d(t,{A:function(){return v}});a(62953),a(58335);var l=a(95976),i=a(12040),n=a(53620),o={class:"cm-popup-wrap"},s={class:"cm-popup-foot"},r={__name:"RemoteBank",props:{userInfo:{type:Object,default:()=>({})},transCode:{type:String,default:""},showRemoteBankNotice:{type:Boolean,default:!1}},emits:["close"],setup(e,t){var{emit:a}=t,r=a,{appContext:u}=(0,l.nI)(),{$qzbankBridge:v}=u.config.globalProperties,d=()=>{r("close")},c=e,m=(0,l.EW)(()=>c.showRemoteBankNotice),p=(0,i.KR)();(0,l.sV)(()=>{v.sendNativeInstrution("getUserAllData",{},e=>{p.value=JSON.parse(e)})});var f=(0,l.EW)(()=>{var e,t,a,l;return""!==(null===(e=p.value)||void 0===e?void 0:e.ycyhVersion)?"/client/mobile/index.html#/fileView?\n          transCode=".concat(encodeURIComponent("V03007"),"&transName=").concat(encodeURIComponent("身份核查"),"\n          &customerName=").concat(encodeURIComponent(null===(t=c.userInfo)||void 0===t?void 0:t.AuthCifName),"&countryCode=").concat(null===(a=c.userInfo)||void 0===a?void 0:a.AuthCountryCode,"\n          &businessType=").concat(encodeURIComponent(c.transCode),"&birthDay=").concat(encodeURIComponent(null===(l=c.userInfo)||void 0===l?void 0:l.AuthBirthDate),"\n          &transCheckName=").concat(encodeURIComponent("港澳台、中国护照客户身份核验"),"\n          "):(n.log("不支持核验"),"")}),g=()=>{var e={type:"2",url:f.value};v.sendNativeInstrution("toRemoteBank",e,()=>{n.log("remote data")})};return(e,t)=>{var a=(0,l.g2)("van-button"),i=(0,l.g2)("van-popup");return(0,l.uX)(),(0,l.Wv)(i,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e),position:"center",round:"",style:{width:"80%"},onCancel:d},{default:(0,l.k6)(()=>[(0,l.Lk)("div",o,[t[4]||(t[4]=(0,l.Lk)("div",{class:"cm-popup-title"},"温馨提示",-1)),t[5]||(t[5]=(0,l.Lk)("div",{class:"cm-popup-content"},[(0,l.Lk)("div",{class:"cm-row-thre-title"}," 您当前的交易存在风险，请您准备好有效证件，并点击下方呼叫按钮进行身份核查。 ")],-1)),(0,l.Lk)("div",s,[(0,l.bF)(a,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:d},{default:(0,l.k6)(()=>[...t[2]||(t[2]=[(0,l.eW)(" 关闭 ",-1)])]),_:1}),(0,l.bF)(a,{type:"primary",class:"cm-foot-btn-normal",block:"",onClick:t[0]||(t[0]=e=>g())},{default:(0,l.k6)(()=>[...t[3]||(t[3]=[(0,l.eW)(" 呼叫客服 ",-1)])]),_:1})]),t[6]||(t[6]=(0,l.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"])}}};const u=r;var v=u}}]);