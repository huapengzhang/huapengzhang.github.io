"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[856],{36856:function(e,a,l){l.r(a),l.d(a,{default:function(){return R}});var r=l(9424),n=l(698),t=(l(65083),l(64520)),u=(l(44114),l(33110),l(27495),l(25440),l(58335),l(95976)),s=l(10160),v=l(12040),i=l(29746),o=l(86635),d=l(51449),c=l(39053),p=l(34568),f=l(78588),k={class:"background_white line_top"},g={class:"amount_box",style:{display:"flex",position:"relative",height:"100%"}},y={style:{flex:"1"}},_={class:"amount_value"},m={style:{flex:"1"}},T={class:"amount_value"},S={class:"info_wrap _bgLightGrey"},h={style:{padding:"10px"}},b={class:"_blue"},I={class:"info_wrap"},L={class:"verifyCodeBox"},P={class:"passwordBox"},A={class:"submitBtn"},w={__name:"AdvanceConfirm",setup(e){var{proxy:a}=(0,u.nI)(),l=(0,c.rd)(),{state:w,commit:N}=(0,d.Pj)(),C=(0,v.KR)(""),R=(0,u.EW)(()=>l.currentRoute.value.query.inputAmount),W=(0,u.EW)(()=>{var e;return null===(e=l.currentRoute.value.query)||void 0===e?void 0:e.fromPage}),D=(0,u.EW)(()=>{var e;return null===(e=l.currentRoute.value.query)||void 0===e?void 0:e.homeSize}),q=(0,u.EW)(()=>w.advanceTransfer.confirmReponseData),F=(0,u.EW)(()=>w.advanceTransfer.signReqData),O=(0,u.EW)(()=>w.advanceTransfer.reqData),x=(0,v.KR)(!1),E=(0,v.KR)(""),K=navigator.userAgent.indexOf("Qzccbank")>-1,B=(0,u.EW)({get(){return w.advanceTransfer.authTypeInfoClickFlag},set(e){N("advanceTransfer/setState",{key:"authTypeInfoClickFlag",value:e})}}),V=(0,u.EW)(()=>l.currentRoute.value.query.showAuthType),M=(0,u.EW)(()=>l.currentRoute.value.query.needMobileCertPwd),G=(0,v.KR)(l.currentRoute.value.query.rstState),J=(0,v.KR)(l.currentRoute.value.query.PhoneTransSmsId),$=(0,v.KR)(60),z=(0,v.KR)(null),U=(0,v.KR)("");(0,u.wB)(()=>C.value,e=>{if(B.value=!1,void 0!=e&&""!=e&&e.length>=6){var a=/^\d{6}$/;1==a.test(e.substring(0,6))&&(B.value=!0,X())}});var j=()=>{z.value||(z.value=setInterval(()=>{$.value>0?$.value-=1:(clearInterval(z.value),z.value=null)},1e3))},H=()=>{if(!($.value>0)){$.value=60;var e={OriTransCode:O.value.TransactionId};p.PReGetSMSPsw(e).then(e=>{J.value=e.PhoneTransSmsId,j()})}},Q=()=>{B.value=!1},X=()=>{"1"==w.advanceTransfer.selectAuthType&&p.apiPCheckSMSPsw({OTPPassword:C.value,OriTransCode:O.value.TransactionId,PhoneTransSmsId:J.value}).then(()=>{a.$sensors.track("AP_TransferProcess",{transfer_type:"账号转账",transfer_page:"转账确认页",is_success:!0,fail_reason:""}),ae()})},Y=()=>{"1"==w.advanceTransfer.selectAuthType?X():q.value.CertType&&"sf"==q.value.CertType?ee():"3"==w.advanceTransfer.selectAuthType&&Z()},Z=()=>{var e=F.value.submitTransId.replace(".do","");K&&o.sendNativeInstrution("getBlueToothKeySignature",{TransactionId:e,Pargram:F.value,HashAlg:"2",DisplayFields:"PayerAcNo,PayeeAcNo,PayeeAcName,Amount",type:"caremodel"},e=>{var a=JSON.parse(e);"true"==a.SignatureState?(N("advanceTransfer/setState",{key:"reqData",value:{CSIISignature:a.CSIISignature}}),ae()):"popView"==a.ErrMsg?l.go(-1):(0,t.A)(a.ErrMsg)})},ee=()=>{var e="true";e=q.value.UsedPin&&"Y"==q.value.UsedPin?"true":"false";var a=JSON.parse(JSON.stringify(w.advanceTransfer.reqData));a.CSIISignature="",a.SignData="",a.SignValue="",K&&o.sendNativeInstrution("getMobileCertSignature",{preSignData:a,needPwdKbd:e},e=>{var a=JSON.parse(e);if("2"==a.type){var r={CSIISignature:a.CSIISignature,SignData:a.SignData,SignValue:a.SignValue};N("advanceTransfer/setState",{key:"reqData",value:r}),ae()}else"3"!=a.type&&"2"!=a.error||l.go(-1)})},ae=()=>{p.GenToken().then(e=>{var a=e._tokenName;K&&o.sendNativeInstrution("callPwdKbd",{},e=>{var l=JSON.parse(e);null!==l&&void 0!==l&&l.cancelInput&&"true"==(null===l||void 0===l?void 0:l.cancelInput)||l.pwd&&l.pwdLength&&6==l.pwdLength&&le(l,a)})})},le=function(){var e=(0,n.A)(function*(e,n){var t={_tokenName:n,TrsPassword:e.pwd,PhoneTransSmsId:J.value};N("advanceTransfer/setState",{key:"reqData",value:t}),p[O.value.submitTransId]((0,r.A)({},O.value)).then(e=>{a.$sensors.track("AP_TransferVerification",{password_type:"密码",verification_type:"校验取款密码",is_success:!0,fail_reason:""}),N("advanceTransfer/setState",{key:"responseData",value:e}),e.OrderNo&&(E.value=e.OrderNo,N("advanceTransfer/setState",{key:"OrderNo",value:E.value})),"wait"==G.value&&E.value&&(G.value="success",N("advanceTransfer/setState",{key:"rstState",value:G.value})),l.push({path:"/AdvanceResult",query:{fromPage:W,homeSize:1+Number(D.value)}})}).catch(()=>{"1"==w.advanceTransfer.selectAuthType&&(C.value="",Q())})});return function(a,l){return e.apply(this,arguments)}}();return(0,u.sV)(()=>{j(),o.sendNativeInstrution("getUserAllData",{},e=>{var a,l=JSON.parse(e);U.value=null===l||void 0===l||null===(a=l.netBankLoginInfo)||void 0===a?void 0:a.MobilePhone})}),(0,u.hi)(()=>{z.value&&clearInterval(z.value)}),(e,a)=>{var l=(0,u.g2)("van-cell"),r=(0,u.g2)("van-cell-group"),n=(0,u.g2)("van-password-input"),t=(0,u.g2)("van-number-keyboard"),o=(0,u.g2)("van-button"),d=(0,u.g2)("content-box");return(0,u.uX)(),(0,u.Wv)(d,{class:"container",title:"确认预约信息"},{default:(0,u.k6)(()=>[(0,u.Lk)("div",null,[(0,u.Lk)("div",k,[(0,u.Lk)("div",g,[(0,u.Lk)("div",y,[(0,u.Lk)("div",_,(0,s.v_)(e.$filters.formatAmount(R.value)),1),a[3]||(a[3]=(0,u.Lk)("div",{class:"amount_label"},"转账金额（元)",-1))]),a[5]||(a[5]=(0,u.Lk)("div",{class:"line_clumn"},null,-1)),(0,u.Lk)("div",m,[(0,u.Lk)("div",T,(0,s.v_)(q.value.OrderTimes||"- -"),1),a[4]||(a[4]=(0,u.Lk)("div",{class:"amount_label"},"预约次数",-1))])])]),(0,u.Lk)("div",S,[(0,u.bF)(r,{class:"cellgroup"},{default:(0,u.k6)(()=>[(0,u.bF)(l,{title:"收款人",value:q.value.PayeeAcName},null,8,["value"]),(0,u.bF)(l,{title:"账户",value:e.$filters.formatterAcNo(q.value.PayeeAcNo)},null,8,["value"]),(0,u.bF)(l,{title:"银行",value:q.value.PayeeBankName},null,8,["value"]),(0,u.bF)(l,{title:"预约类型",value:(0,v.R1)(f.A).TimerFreq[q.value.TimerFreq]},null,8,["value"]),(0,u.bF)(l,{title:"开始日期",value:q.value.BeginDate+" "+q.value.TransDate},null,8,["value"])]),_:1})]),(0,u.bo)((0,u.Lk)("div",h,[a[6]||(a[6]=(0,u.eW)(" 已向手机号",-1)),(0,u.Lk)("span",b,(0,s.v_)(e.$filters.encryptMobile(U.value)),1),a[7]||(a[7]=(0,u.eW)("的手机发送短信验证码 ",-1))],512),[[i.aG,"Duanxin"==V.value]]),(0,u.Lk)("div",I,[(0,u.bo)((0,u.Lk)("div",L,[(0,u.Lk)("div",P,[(0,u.bF)(n,{style:{width:"90%"},value:C.value,mask:!1,length:"6",label:"短信验证码",placeholder:"请输入短信验证码",onFocus:a[0]||(a[0]=e=>x.value=!0)},null,8,["value"])]),(0,u.Lk)("div",{class:(0,s.C4)(["smsBtn _fz12",{btnGrey:$.value>0}]),onClick:H},[(0,u.eW)((0,s.v_)($.value>0?"重发":"获取验证码"),1),(0,u.bo)((0,u.Lk)("span",null,"("+(0,s.v_)($.value)+")",513),[[i.aG,$.value>0]])],2)],512),[[i.aG,"Duanxin"==V.value]]),(0,u.bF)(t,{modelValue:C.value,"onUpdate:modelValue":a[1]||(a[1]=e=>C.value=e),show:x.value,onBlur:a[2]||(a[2]=e=>x.value=!1)},null,8,["modelValue","show"]),a[8]||(a[8]=(0,u.Lk)("div",{class:"_paddingTop15 _paddingCol15 _fz12"},[(0,u.Lk)("p",null,"泉州银行提醒您："),(0,u.Lk)("p",null,[(0,u.eW)(" 1.接到陌生电话或短信，不轻信、不转账，谨防电信"),(0,u.Lk)("span",{class:"_red"},"诈骗"),(0,u.eW)("。 ")]),(0,u.Lk)("p",null,[(0,u.eW)(" 2.若以"),(0,u.Lk)("span",{class:"_red"},"兼职刷单返利、虚假投资理财、虚假网络贷款、冒充快递客服理赔、冒充公检法、领导或亲人朋友"),(0,u.eW)("等为由要求进行的转账汇款，均属于"),(0,u.Lk)("span",{class:"_red"},"诈骗"),(0,u.eW)("。涉及不明资金的转账事宜，务必"),(0,u.Lk)("span",{class:"_red"},"当面或电话确认核实"),(0,u.eW)("，资金一旦转出无法追回。 ")]),(0,u.Lk)("p",{class:"_red"}," 3.不要向陌生人提供银行卡号、密码、短信验证码等个人信息，不扫来历不明的二维码、不点陌生人发来的链接、不安装不明APP。 ")],-1)),(0,u.Lk)("div",A,[(0,u.bF)(o,{type:"primary",onClick:Y,disabled:!B.value},{default:(0,u.k6)(()=>[(0,u.eW)((0,s.v_)("true"==M.value?"手机证书":"输入卡密"),1)]),_:1},8,["disabled"])])])])]),_:1})}}},N=l(1169);const C=(0,N.A)(w,[["__scopeId","data-v-1725f466"]]);var R=C}}]);