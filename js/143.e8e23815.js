"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[143],{3524:function(a,e,n){n.r(e),n.d(e,{default:function(){return U}});var l=n(9424),o=(n(16034),n(62953),n(44114),n(18111),n(22489),n(7588),n(18237),n(13579),n(95976)),i=n(10160),v=n(29746),c=n(12040),t=n(34568),u=n(39053),r=n(51449),s={class:"content-box"},d={class:"contact-list"},k={class:"account-type"},y={key:0},m=["onClick"],f={class:"payee-acount-name UncommonShow"},h={class:"bank-name"},N={class:"account-no"},L={key:1},C=["onClick"],P={class:"payee-acount-name2 UncommonShow"},p={class:"right"},B={class:"account-num-circle"},g={class:"arrow-style"},A={class:"account-list"},b=["onClick"],_={class:"bank-name"},E={class:"account-no"},I={class:"no_data"},F={class:"search-box"},X=["onClick"],K={class:"payee-acount-name"},w={class:"bank-name"},x={class:"account-no"},S={__name:"FrequentContacts",setup(a){var e=(0,c.KR)(),n=(0,u.rd)(),S=(0,c.KR)(1),{commit:M,dispatch:O}=(0,r.Pj)(),{proxy:U}=(0,o.nI)(),Q=(0,c.KR)([]),R=(0,c.KR)([]),q=(0,o.EW)(()=>{var a;return(null===(a=n.currentRoute.value.query)||void 0===a?void 0:a.moduleFlag)||"transfer"}),G=(0,o.EW)(()=>{var a;return(null===(a=n.currentRoute.value.query)||void 0===a?void 0:a.resetPayeeInfo)||!0}),V=()=>{S.value=2,e.value=""},W=(0,o.EW)(()=>{for(var a=[],e=65;e<=90;e++)a.push(String.fromCharCode(e));return a});(0,o.sV)(()=>{D()});var j=()=>{S.value=1,e.value=""},T=a=>{var e=a;e&&1==e.isSelf?(M("transfer/setPayeeInfo",e),U.$sensors.track("AP_TransferStart",{transfer_type:"本人互转"}),n.push({path:"/SelfTransfer",query:{fromPage:"frequentContacts"}})):t.QueryClearBankNoOnblurSimpleMobile({AcNo:e.PayeeAcNo}).then(a=>{void 0!=a.ClearBankNo&&"313397075189"==a.ClearBankNo?e.PayeeBankName="泉州银行":(e.PayeeBankName=a.BankName||"",e.PayeeBankId=a.BankId||"",e.ClearBankName=a.ClearBankName||"",e.ClearBankNo=a.ClearBankNo||""),e.logoUrl="",Z(e)})},Z=a=>{t.MobileQryBankNaForPublic({AcNo:a.PayeeAcNo}).then(e=>{var o,i;a.logoUrl=e.logoUrl,1==G.value&&("transfer"!=q.value?M(q.value+"/resetPayeeUserInfo"):M(q.value+"/resetPayeeInfo"));var v=(null===(o=a)||void 0===o?void 0:o.PayeeBankName)||(null===(i=a)||void 0===i?void 0:i.BankName)||"";a=(0,l.A)((0,l.A)({},a),{},{isQZBank:v.indexOf("泉州银行")>-1}),M("transfer/initPayeeInfo",a),-1==v.indexOf("泉州银行")&&O("transfer/getPayeeBankInfo",{acNo:a.PayeeAcNo}),n.go(-1)})},$=a=>{var e;(null===a||void 0===a||null===(e=a.accountList)||void 0===e?void 0:e.length)>0&&T(a.accountList[0])},z=a=>{T(a)},D=()=>{t.apiMobilePayeeBookQry({Mode:"1"}).then(a=>{a&&"000000"!=a&&(Q.value=[],J(a))})},H=a=>{R.value=[],(null===a||void 0===a?void 0:a.length)>0&&(R.value=Q.value.reduce((e,n)=>(n.PayeeList.forEach(n=>{n.accountList.filter(e=>-1!=e.BankName.indexOf(a)||-1!=e.PayeeAcName.indexOf(a)||-1!=e.PayeeAcNo.indexOf(a)).forEach(a=>{e.push((0,l.A)({},a))})}),e),[]))},J=a=>{if(a.MyList&&(a.MyList.forEach(a=>{a.BankName="泉州银行"}),Q.value=Y(a.MyList,"本人账户")),a["#"]&&a["#"].length>0){var e=[];e=Y(a["#"],"#"),Q.value=Q.value.concat(e)}for(var n of W.value){var l;if(void 0!=a[n]&&(null===(l=a[n])||void 0===l?void 0:l.length)>0){var o=[];o=Y(a[n],n),Q.value=Q.value.concat(o)}}},Y=(a,e)=>{var n=[],l={};return a.forEach(a=>{var{PayeeAcName:n,BankName:o,PayeeAcNo:i}=a;l[n]||(l[n]={PayeeAcName:n,accountList:[]});var v=l[n].accountList.some(a=>a.BankName==o&&a.PayeeAcNo==i);if(!v){var c="本人账户"==e;l[n].accountList.push({PayeeAcName:n,BankName:o,isSelf:c,PayeeAcNo:i})}}),n.push({tag:e,PayeeList:Object.values(l)}),n};return(a,n)=>{var l=(0,o.g2)("van-search"),c=(0,o.g2)("van-icon"),t=(0,o.g2)("van-empty"),u=(0,o.g2)("content-box");return(0,o.uX)(),(0,o.Wv)(u,{class:"container",title:"常用联系人"},{default:(0,o.k6)(()=>{var a,u;return[(0,o.Lk)("div",null,[(0,o.bo)((0,o.Lk)("div",s,[(0,o.bF)(l,{class:"my-van-search",placeholder:"请输入关键字(姓名、账号、手机号、行名)",onClick:V}),(0,o.Lk)("div",d,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(Q.value,a=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a.id},[(0,o.Lk)("div",k,(0,i.v_)(null===a||void 0===a?void 0:a.tag),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.PayeeList,(a,e)=>{var n,l,t;return(0,o.uX)(),(0,o.CE)("div",{calss:"item",key:e},[1==(null===(n=a.accountList)||void 0===n?void 0:n.length)?((0,o.uX)(),(0,o.CE)("div",y,[(0,o.Lk)("div",{class:"contact-item-type1",onClick:e=>$(a)},[(0,o.Lk)("div",f,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcName),1),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.accountList,a=>((0,o.uX)(),(0,o.CE)(o.FK,{key:a.id},[(0,o.Lk)("div",h,(0,i.v_)(null===a||void 0===a?void 0:a.BankName),1),(0,o.Lk)("div",N,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcNo),1)],64))),128))],8,m)])):(0,o.Q3)("",!0),(null===(l=a.accountList)||void 0===l?void 0:l.length)>1?((0,o.uX)(),(0,o.CE)("div",L,[(0,o.Lk)("div",{class:"contact-item-type2",onClick:()=>{a.hide=!a.hide}},[(0,o.Lk)("div",P,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcName),1),(0,o.Lk)("div",p,[(0,o.Lk)("div",B,(0,i.v_)(null===a||void 0===a||null===(t=a.accountList)||void 0===t?void 0:t.length),1),(0,o.Lk)("div",g,[(0,o.bF)(c,{name:null!==a&&void 0!==a&&a.hide?"arrow-down":"arrow-up"},null,8,["name"])])])],8,C),(0,o.bo)((0,o.Lk)("div",A,[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(a.accountList,a=>((0,o.uX)(),(0,o.CE)("div",{key:a.id,class:"account-list-item",onClick:e=>z(a)},[(0,o.Lk)("div",_,(0,i.v_)(null===a||void 0===a?void 0:a.BankName),1),(0,o.Lk)("div",E,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcNo),1)],8,b))),128))],512),[[v.aG,!(null!==a&&void 0!==a&&a.hide)]])])):(0,o.Q3)("",!0)])}),128))],64))),128)),(0,o.bo)((0,o.Lk)("div",I,[(0,o.bF)(t,{description:"暂无数据"})],512),[[v.aG,0==(null===(a=R.value)||void 0===a?void 0:a.length)&&0===(null===(u=Q.value)||void 0===u?void 0:u.length)]])])],512),[[v.aG,1==S.value]]),(0,o.bo)((0,o.Lk)("div",F,[(0,o.bF)(l,{class:"my-van-search",modelValue:e.value,"onUpdate:modelValue":[n[0]||(n[0]=a=>e.value=a),n[1]||(n[1]=a=>{H(a)})],"show-action":"",onCancel:j,placeholder:"请输入关键字(姓名、账号、手机号、行名)"},null,8,["modelValue"]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(R.value,a=>((0,o.uX)(),(0,o.CE)("div",{key:a.id,class:"item"},[(0,o.Lk)("div",{class:"contact-item-type1",onClick:e=>z(a)},[(0,o.Lk)("div",K,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcName),1),(0,o.Lk)("div",w,(0,i.v_)(null===a||void 0===a?void 0:a.BankName),1),(0,o.Lk)("div",x,(0,i.v_)(null===a||void 0===a?void 0:a.PayeeAcNo),1)],8,X)]))),128))],512),[[v.aG,2==S.value]])])]}),_:1})}}},M=n(1169);const O=(0,M.A)(S,[["__scopeId","data-v-07ae5fb1"]]);var U=O}}]);