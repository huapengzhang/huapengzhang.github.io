"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[208],{19208:function(e,a,t){t.r(a),t.d(a,{default:function(){return y}});t(33110),t(27495),t(25440),t(58335),t(62953);var l=t(95976),n=t(10160),r=t(12040),i=t(39053),u=t(51449),v=t(37868),s=t(86635),o=t(51884),d=t(53620),c={class:"remind-text"},g={class:"cell-phone"},k={class:"my-title-box"},f={class:"input-box"},m={class:"submitBtn"},b={__name:"SMSVerification",setup(e){var{state:a}=(0,u.Pj)(),t=(0,r.KR)(""),b=(0,i.rd)(),p=(0,r.KR)(),h=(0,l.EW)(()=>{var e;return null===(e=p.value)||void 0===e||null===(e=e.MobilePhone)||void 0===e?void 0:e.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2")}),y=(0,l.EW)(()=>{var e;return null===(e=b.currentRoute.value)||void 0===e||null===(e=e.query)||void 0===e?void 0:e.limitType}),L=(0,l.EW)(()=>"message"==y.value?a.transferSetting.smsLimitRequest:"trans"==y.value?a.transferSetting.transferLimit:"ukey"==y.value?a.transferSetting.ukeyLimitRequest:"certifi"==y.value?a.transferSetting.certLimitRequest:{}),_=(0,l.EW)(()=>{var e;return(null===(e=t.value)||void 0===e?void 0:e.length)>0}),S=()=>{try{v.ui({OriTransCode:"UsrActLimitMngConfirm",s:a.transferSetting.PayegisDID})}catch(e){d.log("err",e)}},x=()=>{t.value=""},C=()=>{try{v.G4({}).then(e=>{var l=JSON.parse(JSON.stringify(L.value));l._tokenName=e._tokenName,l.OTPPassword=t.value,l.s=a.transferSetting.PayegisDID,l.TransFaceCode="xgxe",v.IX(l).then(()=>{o.l.alert({message:"设置成功"}).then(()=>{b.go(-2)})})})}catch(e){d.log(e)}},I=(0,l.EW)(()=>W.value>=0?"重发（"+W.value+")":"重新获取"),W=(0,r.KR)(60),R=(0,r.KR)(!1),N=null;(0,l.sV)(()=>{O(),P()});var O=()=>{var e,t=navigator.userAgent.indexOf("Qzccbank")>-1;t?s.sendNativeInstrution("getUserAllData",{},e=>{var a=JSON.parse(e);if("true"==(null===a||void 0===a?void 0:a.NetBankLoginStatus)){var t=null===a||void 0===a?void 0:a.netBankLoginInfo;p.value=t}}):p.value=null===(e=a.user)||void 0===e?void 0:e.pwebUser},P=()=>{R.value||(R.value=!0,N=setInterval(()=>{W.value>=0?W.value--:(clearInterval(N),R.value=!1)},1e3))},D=()=>{R.value||(S(),W.value=60,P())};return(0,l.xo)(()=>{R.value&&clearInterval(N)}),(e,a)=>{var r=(0,l.g2)("van-icon"),i=(0,l.g2)("van-field"),u=(0,l.g2)("van-cell"),v=(0,l.g2)("van-button"),s=(0,l.g2)("content-box");return(0,l.uX)(),(0,l.Wv)(s,{class:"container",title:"转账限额设置确认"},{default:(0,l.k6)(()=>[(0,l.Lk)("div",c,[a[1]||(a[1]=(0,l.eW)(" 已向手机号",-1)),(0,l.Lk)("span",g,(0,n.v_)(h.value),1),a[2]||(a[2]=(0,l.eW)("的手机发送短信验证短信 ",-1))]),(0,l.bF)(u,{class:"my-cell"},{title:(0,l.k6)(()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",k,[a[3]||(a[3]=(0,l.Lk)("div",{class:"title"},"短信验证码",-1)),(0,l.Lk)("div",f,[(0,l.bF)(i,{modelValue:t.value,"onUpdate:modelValue":a[0]||(a[0]=e=>t.value=e),placeholder:"请输入短信验证码",type:"digit",maxlength:"6"},{"right-icon":(0,l.k6)(()=>{var e;return[(0,l.bF)(r,{name:"close",onClick:x,class:(0,n.C4)({hidden:(null===(e=t.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,l.k6)(()=>[(0,l.Lk)("div",null,[(0,l.Lk)("div",{class:"unit-text",style:{color:"#7f7bf2"},onClick:D},(0,n.v_)(I.value),1)])]),_:1}),(0,l.Lk)("div",m,[(0,l.bF)(v,{type:"primary","native-type":"submit",disabled:!_.value,onClick:C},{default:(0,l.k6)(()=>[...a[4]||(a[4]=[(0,l.eW)(" 确定 ",-1)])]),_:1},8,["disabled"])])]),_:1})}}},p=t(1169);const h=(0,p.A)(b,[["__scopeId","data-v-3b1b68fc"]]);var y=h}}]);