"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[912],{8912:function(e,a,n){n.r(a),n.d(a,{default:function(){return m}});var t=n(95976),r=n(29746),c=n(10160),i=["onClick"],s={class:"publicbox"},o={class:"publicBox_center"},l={class:"publicBox_top"},u={class:"publicBox_top_left"},p={class:"aliasName"},y={class:"publicBox_top_selected"},f={class:"publicBox_balance"},d={class:"publicBox_acNo"};function v(e,a,n,v,b,k){var A=(0,t.g2)("van-icon"),h=(0,t.g2)("content-box");return(0,t.uX)(),(0,t.Wv)(h,{class:"containers",title:"选择".concat(v.transferType,"账户")},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(v.accountList,a=>((0,t.uX)(),(0,t.CE)("div",{class:"content",key:a.id},[(0,t.Lk)("div",{class:"publicBox",onClick:(0,r.D$)(e=>v.selectCard(a),["stop"])},[(0,t.Lk)("div",s,[(0,t.Lk)("div",o,[(0,t.Lk)("div",l,[(0,t.Lk)("div",u,[(0,t.Lk)("span",p,(0,c.v_)(a.aliasName),1),(0,t.bo)((0,t.bF)(A,{name:"eye-o",size:"12",onClick:e=>v.showBalance(a,!1,e)},null,8,["onClick"]),[[r.aG,a.isShow]]),(0,t.bo)((0,t.bF)(A,{name:"closed-eye",size:"12",onClick:e=>v.showBalance(a,!0,e)},null,8,["onClick"]),[[r.aG,!a.isShow]])]),(0,t.bo)((0,t.Lk)("div",y,null,512),[[r.aG,v.typeChecked.id==a.id]])]),(0,t.Lk)("div",f," 活期可用余额： "+(0,c.v_)(a.isShow?e.$filters.formatAmount(a.balance):"******"),1),(0,t.Lk)("div",d,(0,c.v_)(a.id),1)])])],8,i)]))),128))]),_:1},8,["title"])}var b=n(9424),k=n(698),A=(n(3362),n(44114),n(18111),n(22489),n(7588),n(33110),n(12040)),h=n(39053),C=n(51449),_=n(34568),B=n(53620),L={name:"CardList",setup(){var e=(0,h.lq)(),a=(0,h.rd)(),{state:n,commit:r,dispatch:c}=(0,C.Pj)(),i=(0,A.KR)("转出"),s=(0,A.KR)({}),o=(0,A.KR)([]),{proxy:l}=(0,t.nI)(),u=(0,t.EW)(()=>n.transfer.payerInfo);(0,t.EW)(()=>n.transfer.payeeInfo);(0,t.sV)(()=>{"payee"==e.query.type&&(i.value="转入"),p()});var p=()=>{(0,_.apiUserAcListQueryForMobile)({PrdId:"PBankInnerTransfer",AcNoName:"PayerAcNo"}).then(a=>{o.value=a.List,"payer"==e.query.type&&(n.transfer.payerInfo?s.value=n.transfer.payerInfo:s.value=o.value[0]),"payee"==e.query.type&&(n.transfer.payeeInfo?s.value=n.transfer.payeeInfo:s.value=o.value[0])})},y=function(){var e=(0,k.A)(function*(e,a,n){n.stopPropagation();var t=[],c="";e.balance||(c=e.id==u.value.id&&u.value.balance?u.value.balance:yield f(e)),o.value.forEach(n=>{var r=n;e.id==n.id&&(r.balance=c||r.balance,r.isShow=a),t.push(r)}),r("transfer/setState",{key:"accountList",value:JSON.stringify(t)})});return function(a,n,t){return e.apply(this,arguments)}}(),f=function(){var e=(0,k.A)(function*(e){var a={AcNo:e.id,BankAcType:e.bankAcType},n=yield(0,_.apiSavSubActsQryForMobile)(a),t=n.List,r=t.filter(function(e){if("CNY"===e.Currency)return e}),c=r[0],i=yield d(e,c);return i});return function(a){return e.apply(this,arguments)}}(),d=(e,a)=>new Promise(function(n,t){var r={AcNo:e.id,BankAcType:e.bankAcType,SubAcSeq:a.SubAcSeq,Currency:"CNY"};(0,_.apiSingleActBalQry)(r).then(e=>{n(e.AvailBal||"")}).catch(e=>{t(e)})}),v=function(){var n=(0,k.A)(function*(n){B.info("route.query.type",e.query.type,n),"payer"==e.query.type&&(B.info(1111),r("transfer/setPayerInfo",n),c("transfer/getAccountList")),"payee"==e.query.type&&(r("transfer/initPayeeInfo",(0,b.A)((0,b.A)({},n),{},{PayeeAcNo:n.id})),c("transfer/getPayeeBankInfo",{acNo:n.id})),l.$sensors.track("AP_TransferStart",{transfer_type:"本人互转"}),a.go(-1)});return function(e){return n.apply(this,arguments)}}();return{typeChecked:s,transferType:i,accountList:o,init:p,showBalance:y,getSubActs:f,getBalance:d,selectCard:v}}},S=n(1169);const I=(0,S.A)(L,[["render",v],["__scopeId","data-v-dc1deaa6"]]);var m=I}}]);