"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[653],{5946:function(e,a,n){n.d(a,{Q8:function(){return t},Us:function(){return u},it:function(){return r}});var l=n(66508);function t(e){return(0,l.A)({url:"pweb/MobileTransferCancelQry.do",method:"POST",data:e})}function u(e){return(0,l.A)({url:"pweb/TransferCancelConfirm.do",method:"POST",data:e})}function r(e){return(0,l.A)({url:"pweb/TransferCancel.do",method:"POST",data:e})}},7653:function(e,a,n){n.r(a),n.d(a,{default:function(){return m}});n(65083);var l=n(64520),t=(n(62953),n(58335),n(95976)),u=n(10160),r=n(29746),o=n(12040),v=n(39053),s=n(51449),i=n(86635),c=n(5946),d=n(34568),f={class:"rzz_duanxtop"},p={style:{color:"#0f8bdf"}},k={class:"padding_10 submitBtn"},b={__name:"CancelVerify",setup(e){var{state:a,commit:n}=(0,s.Pj)(),b=(0,o.KR)(1),g=(0,o.KR)(""),h=(0,v.rd)(),m=(0,t.EW)(()=>h.currentRoute.value.query),y=(0,o.KR)(""),T=(0,o.KR)(""),S=(0,o.KR)(!0),_=(0,o.KR)(60),C=(0,o.KR)(null),I=()=>{C.value||(C.value=setInterval(()=>{_.value>0?_.value-=1:(clearInterval(C.value),C.value=null)},1e3))},w=()=>{if(6!=g.value.length)return(0,l.A)("验证码为6位数字");O()},A=()=>{6==g.value.length?S.value=!1:S.value=!0},R=()=>{var e=navigator.userAgent.indexOf("Qzccbank")>-1,n={};e?i.sendNativeInstrution("getUserAllData",{},e=>{n=JSON.parse(e),P(n)}):(n=a.user.pwebUser,P(n))},P=e=>{var a,n,l;b.value=null===(a=e.netBankLoginInfo)||void 0===a?void 0:a.AuthType,"7"==b.value||"1"==b.value?b.value="1":"6"==b.value?b.value="2":"4"==b.value&&"1"==T.value&&(b.value="4"),T.value=String(null===e||void 0===e||null===(n=e.netBankLoginInfo)||void 0===n?void 0:n.isBlueUkey),y.value=null===e||void 0===e||null===(l=e.netBankLoginInfo)||void 0===l?void 0:l.MobilePhone},L=()=>{if(!(_.value>0)){_.value=60;var e={OriTransCode:"StructureDepositCancelConfirm.do"};d.PReGetSMSPsw(e).then(()=>{I()})}},K=()=>{i.sendNativeInstrution("getBlueToothKeySignature",{TransactionId:"TransferCancel",Pargram:a.cancelTransfer.cancelRequest,HashAlg:"1",type:"caremodel"},e=>{var a=JSON.parse(e);if("true"==a.SignatureState){var t={};t.CSIISignature=a.CSIISignature,n("cancelTransfer/setState",{key:"cancelRequest",value:t}),O()}else(0,l.A)(a.ErrMsg)})},O=()=>{d.GenToken().then(e=>{var t=e._tokenName;i.sendNativeInstrution("callPwdKbd",{},e=>{var u=JSON.parse(e);if((null===u||void 0===u||!u.cancelInput||"true"!=(null===u||void 0===u?void 0:u.cancelInput))&&u.pwd&&u.pwdLength&&6==u.pwdLength){var r={_tokenName:t,TrsPassword:u.pwd,OTPPassword:g.value};n("cancelTransfer/setState",{key:"cancelRequest",value:r}),c.it(a.cancelTransfer.cancelRequest).then(()=>{(0,l.A)("撤销成功"),n("cancelTransfer/resetRequest"),setTimeout(()=>{h.go(-2)},100)}).catch(()=>{g.value=""})}})})};return(0,t.sV)(()=>{R(),I()}),(e,a)=>{var n=(0,t.g2)("van-field"),l=(0,t.g2)("van-cell-group"),o=(0,t.g2)("van-button"),v=(0,t.g2)("content-box");return(0,t.uX)(),(0,t.Wv)(v,{class:"container",title:"撤销验证"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",null,[(0,t.Lk)("div",f,[a[2]||(a[2]=(0,t.eW)(" 已向手机号",-1)),(0,t.Lk)("span",p,(0,u.v_)(e.$filters.encryptMobile(m.value.mobilePhone)),1),a[3]||(a[3]=(0,t.eW)("的手机发送短信验证码 ",-1))]),(0,t.bo)((0,t.Lk)("div",null,[(0,t.bF)(l,{class:"_marginBottom10 content"},{default:(0,t.k6)(()=>[(0,t.bF)(n,{center:"",clearable:"",modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=e=>g.value=e),onInput:A,label:"短信验证码",placeholder:"请输入短信验证码"},{button:(0,t.k6)(()=>[(0,t.Lk)("div",{class:(0,u.C4)(["smsBtn",{btnGrey:_.value>0}]),onClick:L},[a[4]||(a[4]=(0,t.eW)(" 重发",-1)),(0,t.bo)((0,t.Lk)("span",null,"("+(0,u.v_)(_.value)+")",513),[[r.aG,_.value>0]])],2)]),_:1},8,["modelValue"])]),_:1})],512),[[r.aG,1==m.value.AuthType||4==m.value.AuthType]]),(0,t.Lk)("div",k,["1"==m.value.AuthType?((0,t.uX)(),(0,t.Wv)(o,{key:0,type:"primary",block:"",onClick:a[1]||(a[1]=e=>w()),disabled:S.value},{default:(0,t.k6)(()=>[...a[5]||(a[5]=[(0,t.eW)("输入卡密",-1)])]),_:1},8,["disabled"])):((0,t.uX)(),(0,t.Wv)(o,{key:1,type:"primary",disabled:!S.value,onClick:K},{default:(0,t.k6)(()=>[...a[6]||(a[6]=[(0,t.eW)("输入UKEY密码 ",-1)])]),_:1},8,["disabled"]))])])]),_:1})}}},g=n(1169);const h=(0,g.A)(b,[["__scopeId","data-v-2ff327f1"]]);var m=h}}]);