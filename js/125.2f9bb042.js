"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[125],{33125:function(e,a,n){n.r(a),n.d(a,{default:function(){return C}});n(62953);var l=n(95976),t=n(10160),o=n(29746),r={class:"info_wrap"},u={class:"UncommonShow"},i={style:{"margin-left":"10px"}},c={class:"UncommonShow"},s={style:{"margin-left":"10px"}},v={class:"_flex-center _paddingRow10"},f={class:"_flex-basic75 _fz14"},d={class:"submitBtn"};function p(e,a,p,m,y,k){var h=(0,l.g2)("van-image"),A=(0,l.g2)("van-icon"),b=(0,l.g2)("van-cell"),g=(0,l.g2)("van-field"),I=(0,l.g2)("van-cell-group"),_=(0,l.g2)("van-form"),L=(0,l.g2)("van-button"),P=(0,l.g2)("van-picker"),C=(0,l.g2)("van-popup"),N=(0,l.g2)("content-box");return(0,l.uX)(),(0,l.Wv)(N,{class:"container",title:"转账",isBlockLeftEvent:"",onClickLeft:m.goBack},{default:(0,l.k6)(()=>[(0,l.bF)(h,{src:n(52177)},null,8,["src"]),(0,l.Lk)("div",r,[(0,l.bF)(_,null,{default:(0,l.k6)(()=>[(0,l.bF)(I,{inset:""},{default:(0,l.k6)(()=>[(0,l.bF)(b,{title:"转出账户"},{value:(0,l.k6)(()=>{var e,n,o;return[(0,l.Lk)("div",{onClick:a[0]||(a[0]=e=>m.toAccountList("payer"))},[(0,l.Lk)("div",null,[(0,l.Lk)("span",u,(0,t.v_)(null===(e=m.payerInfo)||void 0===e?void 0:e.aliasName),1),(0,l.Lk)("span",i," 尾号("+(0,t.v_)(null===(n=m.payerInfo)||void 0===n||null===(n=n.id)||void 0===n?void 0:n.slice(-4))+")",1)]),(0,l.Lk)("div",null,"活期可用余额："+(0,t.v_)(null===(o=m.payerInfo)||void 0===o?void 0:o.balance),1)])]}),extra:(0,l.k6)(()=>[(0,l.bF)(h,{width:"40",fit:"contain",src:n(80014)},null,8,["src"]),(0,l.bF)(A,{name:"arrow",class:"accountIcon",size:"16"})]),_:1}),(0,l.bF)(b,{title:"收款账户"},{value:(0,l.k6)(()=>{var e,n;return[(0,l.Lk)("div",{onClick:a[1]||(a[1]=e=>m.toAccountList("payee"))},[(0,l.Lk)("div",null,[(0,l.Lk)("span",c,(0,t.v_)(null===(e=m.payeeInfo)||void 0===e?void 0:e.aliasName),1),(0,l.Lk)("span",s," 尾号("+(0,t.v_)(null===(n=m.payeeInfo)||void 0===n||null===(n=n.PayeeAcNo)||void 0===n?void 0:n.slice(-4))+")",1)])])]}),extra:(0,l.k6)(()=>[(0,l.bF)(h,{width:"40",fit:"contain",src:n(80014)},null,8,["src"]),(0,l.bF)(A,{name:"arrow",class:"accountIcon",size:"16"})]),_:1}),(0,l.bF)(g,{label:"转账金额",modelValue:m.inputAmount,"onUpdate:modelValue":a[2]||(a[2]=e=>m.inputAmount=e),maxlength:"13",placeholder:"请输入转账金额",rules:[{validator:m.validator,message:"请输入正确的金额"}]},null,8,["modelValue","rules"]),(0,l.bo)((0,l.Lk)("div",v,[a[8]||(a[8]=(0,l.Lk)("div",{class:"_flex-basic25"},null,-1)),(0,l.Lk)("div",f," 人民币 "+(0,t.v_)(e.$filters.amountFormatWords(m.inputAmount)),1)],512),[[o.aG,m.inputAmount]]),(0,l.bF)(g,{readonly:"",label:"附言",modelValue:m.attachInfo,"onUpdate:modelValue":a[3]||(a[3]=e=>m.attachInfo=e),placeholder:"请选择附言","right-icon":"arrow",onClick:a[4]||(a[4]=e=>m.selectAttachInfo())},null,8,["modelValue"]),(0,l.bo)((0,l.bF)(g,{label:"附言",modelValue:m.otherAttachInfo,"onUpdate:modelValue":a[5]||(a[5]=e=>m.otherAttachInfo=e),placeholder:"请输入附言"},null,8,["modelValue"]),[[o.aG,"自定义"===m.attachInfo]])]),_:1})]),_:1})]),a[10]||(a[10]=(0,l.Lk)("div",{class:"_fz10 _grey _paddingCol15 _paddingRow10"},[(0,l.Lk)("div",null,[(0,l.eW)(" 泉州银行提醒您：1.为了您的资金安全，请勿轻易向 "),(0,l.Lk)("span",{class:"_red"},"陌生人"),(0,l.eW)(" 转账汇款，不要轻信陌生人通过网络、电话、短信等方式告知的信息， "),(0,l.Lk)("span",{class:"_red"},"谨防电信网络诈骗"),(0,l.eW)("。 ")]),(0,l.Lk)("div",null," 2.贷款资金不能用于购房、投资、理财、同名转账等相关交易，如果有这种情况，交易将被拦截。 ")],-1)),(0,l.Lk)("div",d,[(0,l.bF)(L,{type:"primary",onClick:a[6]||(a[6]=e=>m.checkPay())},{default:(0,l.k6)(()=>[...a[9]||(a[9]=[(0,l.eW)("下一步",-1)])]),_:1})]),(0,l.bF)(C,{show:m.attachInfoShow,"onUpdate:show":a[7]||(a[7]=e=>m.attachInfoShow=e),position:"bottom"},{default:(0,l.k6)(()=>[(0,l.bF)(P,{title:"请选择附言","value-key":"name",onConfirm:m.attachInfoConfirm,columns:m.attachInfoColumn},null,8,["onConfirm","columns"])]),_:1},8,["show"])]),_:1},8,["onClickLeft"])}n(65083);var m=n(64520),y=n(9424),k=(n(27495),n(44114),n(18111),n(22489),n(7588),n(12040)),h=n(51449),A=n(39053),b=n(86635),g=n(34568),I=n(53620),_={name:"SelfTransfer",setup(){var{proxy:e}=(0,l.nI)(),{state:a,commit:n,dispatch:t}=(0,h.Pj)(),o=(0,A.rd)(),r=(0,l.EW)(()=>{var e;return null===(e=o.currentRoute.value.query)||void 0===e?void 0:e.fromPage}),u=(0,l.EW)(()=>a.transfer.payeeInfo),i=(0,l.EW)(()=>a.transfer.payerInfo),c=(0,k.KR)(""),s=(0,k.KR)("往来款"),v=(0,k.KR)(""),f=(0,k.KR)(!1),d=(0,k.KR)([{value:1,name:"往来款"},{value:2,name:"贷款"},{value:3,name:"采购款"},{value:4,name:"工资"},{value:5,name:"借款"},{value:6,name:"还款"},{value:7,name:"差旅费"},{value:8,name:"保证金"},{value:9,name:"运费"},{value:10,name:"自定义"}]);(0,l.sV)(()=>{e.$sensors.track("AP_TransferProcess",{transfer_type:"本人互转",transfer_page:"信息录入页",is_success:!0,fail_reason:""}),p()});var p=()=>{g.apiUserAcListQueryForMobile({PrdId:"PBankInnerTransfer",AcNoName:"AcNo"}).then(e=>{if(null!==e&&void 0!==e&&e.List.length){var a=[];null===e||void 0===e||e.List.forEach((e,l)=>{var t=(0,y.A)((0,y.A)({},e),{},{balance:""});g.apiSavSubActsQryForMobile({AcNo:e.id,BankAcType:e.bankAcType}).then(e=>{var a=null===e||void 0===e?void 0:e.List.filter(function(e){if("CNY"===e.Currency)return e});t=(0,y.A)((0,y.A)({},t),{},{seqData:a}),t.id!=u.value.id&&t.id!=u.value.PayeeAcNo||n("transfer/setPayeeInfo",t),i.value&&(i.value.PayeeAcNo||i.value.id)?t.id!=i.value.PayeeAcNo&&t.id!=i.value.id||(n("transfer/setPayerInfo",t),_(t)):0==l&&(n("transfer/setPayerInfo",t),_(t))}),a.push(t)}),n("transfer/setState",{key:"accountList",value:a})}})},_=e=>{I.info("newItem",e),g.apiSingleActBalQry({AcNo:e.id,BankAcType:e.bankAcType,SubAcSeq:e.seqData[0].SubAcSeq,Currency:"CNY"}).then(e=>{null!==e&&void 0!==e&&e.DepositBal?n("transfer/setPayerInfo",{balance:(null===e||void 0===e?void 0:e.DepositBal)||""}):n("transfer/setPayerInfo",{balance:""})})},L=e=>/^[1-9]\d{0,11}(\.\d{1,2})?$|^0(\.\d{1,2})?$/.test(e),P=e=>{s.value=e.name,"自定义"!==s.value&&(v.value=""),f.value=!1},C=()=>{f.value=!0},N=e=>{o.push({path:"/CardList",query:{type:e}})},w=()=>{i.value.id!==u.value.PayeeAcNo?i.value.id?u.value.PayeeAcNo?g.GenToken({}).then(e=>{F(e._tokenName)}):(0,m.A)("转入账号不能为空"):(0,m.A)("转出账号不能为空"):(0,m.A)("转出账号不能等于转入账号")},F=e=>{var a={_tokenName:e,PayerAcNo:i.value.id,PayerAcName:i.value.name,PayerBankAcType:i.value.bankAcType,PayerCurrency:i.value.currency.id,PayeeAcNo:u.value.id,PayeeAcName:u.value.name,PayeeBankAcType:u.value.bankAcType,Amount:c.value,AttachInfo:"自定义"!==s.value?s.value:v.value,RemarkMode:"1"};I.info("selfTransfer submit",a),t("transfer/selfTransfer",a)},S=()=>{try{"frequentContacts"==r.value?o.go(-3):"TransferIndex"==r.value?o.go(-1):x()}catch(e){I.log(e),o.go(-1)}},x=()=>{var e=T(),a=navigator.userAgent.indexOf("Qzccbank")>-1;e.from&&a?(localStorage.clear(),b.sendNativeInstrution("closeWebView")):history.back()},T=()=>{for(var e=location.href,a=e.indexOf("?"),n=e.substr(a).substr(1),l=n.split("&"),t={},o=0;o<l.length;o++){var r=l[o].split("=");t[r[0]]=r[1]}return t};return{payeeInfo:u,payerInfo:i,inputAmount:c,attachInfo:s,otherAttachInfo:v,attachInfoShow:f,attachInfoColumn:d,validator:L,attachInfoConfirm:P,selectAttachInfo:C,toAccountList:N,checkPay:w,onSubmit:F,fromPage:r,goBack:S}}},L=n(1169);const P=(0,L.A)(_,[["render",p],["__scopeId","data-v-730b2d42"]]);var C=P},52177:function(e,a,n){e.exports=n.p+"img/transfer_self.17f94475.png"},80014:function(e,a,n){e.exports=n.p+"img/icon_ylList.38a06f95.png"}}]);