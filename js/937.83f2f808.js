"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[937],{33937:function(e,t,l){l.r(t),l.d(t,{default:function(){return N}});var a=l(9424),i=(l(62953),l(44114),l(58335),l(95976)),n=l(10160),o=l(29746),s=l(12040),u=l(39053),r=l(86635),v=l(51449),d=l(37868),c=l(93336),m=l(53620),p={class:"my-group"},g={class:"my-title-box"},k={class:"input-box"},L={class:"my-group"},S={class:"my-title-box"},f={class:"input-box"},h={class:"agree-proto-box"},y={class:"submitBtn"},b={class:"pop-wrap"},C={class:"pop-btn"},P={class:"cm-popup-wrap"},_={class:"cm-popup-content"},R={class:"cm-row-thre-title"},A={class:"cm-popup-foot"},M={__name:"SMSLimitSetting",setup(e){var t=(0,s.KR)(!1),l=(0,s.KR)({}),{state:M,commit:w}=(0,v.Pj)(),F=(0,i.EW)(()=>M.transferSetting.transferLimitSetting),N=(0,s.KR)(),D=(0,i.EW)(()=>{var e;return null===(e=N.value)||void 0===e?void 0:e.AuthType}),I=(0,i.EW)(()=>M.transferSetting.smsLimitRequest),T=(0,u.rd)(),U=(0,s.KR)(""),x=(0,s.KR)(""),B=(0,s.KR)(!1),W=(0,s.KR)(!1),q=(0,s.KR)(""),V=(0,s.KR)(""),K=(0,s.KR)("");(0,i.sV)(()=>{O(),E()});var O=()=>{var e,t=navigator.userAgent.indexOf("Qzccbank")>-1;t?r.sendNativeInstrution("getUserAllData",{},e=>{var t=JSON.parse(e);if("true"==(null===t||void 0===t?void 0:t.NetBankLoginStatus)){var l=null===t||void 0===t?void 0:t.netBankLoginInfo;N.value=l}}):N.value=null===(e=M.user)||void 0===e?void 0:e.pwebUser},E=()=>{var e,t,l,a;(null===(e=I.value)||void 0===e||null===(e=e.S_LimitPerTrs)||void 0===e?void 0:e.length)>0?U.value=I.value.S_LimitPerTrs:U.value=null===(l=F.value)||void 0===l?void 0:l.S_LimitPerTrs;(null===(t=I.value)||void 0===t||null===(t=t.S_LimitPerDay)||void 0===t?void 0:t.length)>0?x.value=I.value.S_LimitPerDay:x.value=null===(a=F.value)||void 0===a?void 0:a.S_LimitPerDay},j=()=>{var e,t,l,a,i,n,o;w("transferSetting/setSMSLimitRequestParams",["C_LimitPerTrs",null===(e=F.value)||void 0===e?void 0:e.C_LimitPerTrs]),w("transferSetting/setSMSLimitRequestParams",["C_LimitPerDay",null===(t=F.value)||void 0===t?void 0:t.C_LimitPerDay]),w("transferSetting/setSMSLimitRequestParams",["S_LimitPerTrs",U.value]),w("transferSetting/setSMSLimitRequestParams",["OldSLimitPerTrs",null===(l=F.value)||void 0===l?void 0:l.S_LimitPerTrs]),w("transferSetting/setSMSLimitRequestParams",["S_LimitPerDay",x.value]),w("transferSetting/setSMSLimitRequestParams",["LimitTimesPerDay",null===(a=F.value)||void 0===a?void 0:a.LimitTimesPerDay]),w("transferSetting/setSMSLimitRequestParams",["LimitPerYear",null===(i=F.value)||void 0===i?void 0:i.LimitPerYear]),w("transferSetting/setSMSLimitRequestParams",["OldLimitTimesPerDay",null===(n=F.value)||void 0===n?void 0:n.LimitTimesPerDay]),w("transferSetting/setSMSLimitRequestParams",["OldLimitPerYear",null===(o=F.value)||void 0===o?void 0:o.LimitPerYear])},X=e=>{w("transferSetting/setSMSLimitRequestParams",["AuthType",e])},Y=()=>{X("1"),J()},J=()=>{d.U2({SceneCode:"MobileUsrActLimitMng",s:M.transferSetting.PayegisDID}).then(e=>{z(null===e||void 0===e?void 0:e.BussNo)})},z=e=>{var a,i=e;d.w2({SceneCode:"MobileUsrActLimitMng",BussNo:i,s:M.transferSetting.PayegisDID,TransFaceCode:"xgxe",S_LimitPerTrs:U.value,OldSLimitPerTrs:null===(a=F.value)||void 0===a?void 0:a.S_LimitPerTrs}).then(e=>{if(e){null!==e&&void 0!==e&&e.BussNo&&(i=e.BussNo,V.value=i),w("transferSetting/setSMSLimitRequestParams",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setSMSLimitRequestParams",["BussNo",i]);var a=(null===e||void 0===e?void 0:e.WarningMsg)||"您的交易存在风险，为了进一步保护您的账户安全，请您谨慎操作！";if(K.value=null===e||void 0===e?void 0:e.AuthFlag,"0"==(null===e||void 0===e?void 0:e.AuthFlag))G(a);else if("1"==(null===e||void 0===e?void 0:e.AuthFlag)){var n=null===e||void 0===e?void 0:e.AuthCountryCode,o=null===e||void 0===e?void 0:e.AuthCifName,s=null===e||void 0===e?void 0:e.AuthBirthDate;l.value={AuthCountryCode:n,AuthCifName:o,AuthBirthDate:s},t.value=!1}else"2"==(null===e||void 0===e?void 0:e.AuthFlag)?G(a):"3"==(null===e||void 0===e?void 0:e.AuthFlag)?$():m.log("failed....")}})},G=e=>{q.value=e,W.value=!0},Q=()=>{W.value=!1,r.sendNativeInstrution("identityCheck",{SceneCode:"MobileUsrActLimitMng",BussNo:V.value},e=>{var t,l=JSON.parse(e);w("transferSetting/setSMSLimitRequestParams",["SceneCode","MobileUsrActLimitMng"]),w("transferSetting/setSMSLimitRequestParams",["BussNo",V.value]),(null===Object||void 0===Object||null===(t=Object.keys(l))||void 0===t?void 0:t.length)>0&&"000000"==(null===l||void 0===l?void 0:l.rtnCode)?$():m.log("user cancel..")})},$=()=>{try{d.GL((0,a.A)((0,a.A)({},M.transferSetting.smsLimitRequest),{},{s:M.transferSetting.PayegisDID,TransFaceCode:"xgxe"})).then(e=>{e&&"000000"!=e&&(W.value=!1,Z.value=!1,T.push({path:"/SMSVerification",query:{limitType:"message"}}))})}catch(e){m.log("err:",e)}},H=(0,i.EW)(()=>B.value&&U.value.length>0&&x.value.length>0),Z=(0,s.KR)(!1),ee=()=>{U.value=""},te=()=>{x.value=""},le=()=>{j(),B.value=!B.value,T.push({path:"/Negotias"})},ae=()=>{H.value&&(Z.value=!0,j())};return(e,a)=>{var s=(0,i.g2)("van-icon"),u=(0,i.g2)("van-field"),r=(0,i.g2)("van-cell"),v=(0,i.g2)("van-cell-group"),d=(0,i.g2)("van-checkbox"),m=(0,i.g2)("van-button"),M=(0,i.g2)("van-popup"),w=(0,i.g2)("content-box");return(0,i.uX)(),(0,i.Wv)(w,{class:"container",title:"转账限额设置"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",p,[(0,i.bF)(v,null,{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(r,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",g,[a[10]||(a[10]=(0,i.Lk)("div",{class:"title"},"单笔转账限额",-1)),(0,i.Lk)("div",k,[(0,i.bF)(u,{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e),placeholder:"单笔转账限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(s,{name:"close",onClick:ee,class:(0,n.C4)({hidden:(null===(e=U.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...a[11]||(a[11]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(r,{title:"单笔转账限额:"+(null===(e=F.value)||void 0===e?void 0:e.S_LimitPerTrs)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",L,[(0,i.bF)(v,{class:"my-group"},{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(r,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",S,[a[12]||(a[12]=(0,i.Lk)("div",{class:"title"},"日累计限额",-1)),(0,i.Lk)("div",f,[(0,i.bF)(u,{modelValue:x.value,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value=e),placeholder:"日累计限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(s,{name:"close",onClick:te,class:(0,n.C4)({hidden:(null===(e=x.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...a[13]||(a[13]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(r,{title:"日累计转账限额:"+(null===(e=F.value)||void 0===e?void 0:e.S_LimitPerDay)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",h,[(0,i.bF)(d,{name:"1",modelValue:B.value,"onUpdate:modelValue":a[2]||(a[2]=e=>B.value=e)},{default:(0,i.k6)(()=>[a[14]||(a[14]=(0,i.eW)("我已阅读并同意 ",-1)),(0,i.Lk)("span",{class:"protocol-text",onClick:le}," 《泉州银行电子银行个人客户服务协议》 ")]),_:1},8,["modelValue"])]),(0,i.Lk)("div",y,[(0,i.bF)(m,{type:"primary","native-type":"submit",disabled:!H.value,onClick:ae},{default:(0,i.k6)(()=>[...a[15]||(a[15]=[(0,i.eW)(" 修改限额 ",-1)])]),_:1},8,["disabled"])]),(0,i.bF)(M,{show:Z.value,"onUpdate:show":a[3]||(a[3]=e=>Z.value=e),round:"",closeable:"","close-on-click-overlay":!1},{default:(0,i.k6)(()=>[(0,i.Lk)("div",b,[a[17]||(a[17]=(0,i.Lk)("div",{class:"pop-title"},"需先进行认证验证",-1)),a[18]||(a[18]=(0,i.Lk)("div",{class:"pop-subtitle"},"请选择认证方式",-1)),(0,i.Lk)("div",C,[(0,i.bo)((0,i.bF)(m,{plain:"",type:"primary",block:"",onClick:Y},{default:(0,i.k6)(()=>[...a[16]||(a[16]=[(0,i.eW)(" 手机短信 ",-1)])]),_:1},512),[[o.aG,"1"==D.value||"7"==D.value]])])])]),_:1},8,["show"]),(0,i.bF)(M,{show:W.value,"onUpdate:show":a[7]||(a[7]=e=>W.value=e),position:"center",round:"",style:{width:"80%"},onCancel:a[8]||(a[8]=e=>W.value=!1)},{default:(0,i.k6)(()=>[(0,i.Lk)("div",P,[a[22]||(a[22]=(0,i.Lk)("div",{class:"cm-popup-title"},"风险提示",-1)),(0,i.Lk)("div",_,[(0,i.Lk)("div",R,(0,n.v_)(q.value),1)]),(0,i.Lk)("div",A,[(0,i.bF)(m,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:a[4]||(a[4]=e=>W.value=!1)},{default:(0,i.k6)(()=>[...a[19]||(a[19]=[(0,i.eW)(" 取消 ",-1)])]),_:1}),"2"==K.value?((0,i.uX)(),(0,i.Wv)(m,{key:0,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:a[5]||(a[5]=e=>$())},{default:(0,i.k6)(()=>[...a[20]||(a[20]=[(0,i.eW)(" 继续交易 ",-1)])]),_:1})):((0,i.uX)(),(0,i.Wv)(m,{key:1,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:a[6]||(a[6]=e=>Q())},{default:(0,i.k6)(()=>[...a[21]||(a[21]=[(0,i.eW)(" 身份核验 ",-1)])]),_:1}))]),a[23]||(a[23]=(0,i.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"]),(0,i.bF)(c.A,{showRemoteBankNotice:t.value,userInfo:l.value,transCode:"MobileUsrActLimitMng",onClose:a[9]||(a[9]=e=>t.value=!1)},null,8,["showRemoteBankNotice","userInfo"])]),_:1})}}},w=l(1169);const F=(0,w.A)(M,[["__scopeId","data-v-69758942"]]);var N=F},93336:function(e,t,l){l.d(t,{A:function(){return v}});l(62953),l(58335);var a=l(95976),i=l(12040),n=l(53620),o={class:"cm-popup-wrap"},s={class:"cm-popup-foot"},u={__name:"RemoteBank",props:{userInfo:{type:Object,default:()=>({})},transCode:{type:String,default:""},showRemoteBankNotice:{type:Boolean,default:!1}},emits:["close"],setup(e,t){var{emit:l}=t,u=l,{appContext:r}=(0,a.nI)(),{$qzbankBridge:v}=r.config.globalProperties,d=()=>{u("close")},c=e,m=(0,a.EW)(()=>c.showRemoteBankNotice),p=(0,i.KR)();(0,a.sV)(()=>{v.sendNativeInstrution("getUserAllData",{},e=>{p.value=JSON.parse(e)})});var g=(0,a.EW)(()=>{var e,t,l,a;return""!==(null===(e=p.value)||void 0===e?void 0:e.ycyhVersion)?"/client/mobile/index.html#/fileView?\n          transCode=".concat(encodeURIComponent("V03007"),"&transName=").concat(encodeURIComponent("身份核查"),"\n          &customerName=").concat(encodeURIComponent(null===(t=c.userInfo)||void 0===t?void 0:t.AuthCifName),"&countryCode=").concat(null===(l=c.userInfo)||void 0===l?void 0:l.AuthCountryCode,"\n          &businessType=").concat(encodeURIComponent(c.transCode),"&birthDay=").concat(encodeURIComponent(null===(a=c.userInfo)||void 0===a?void 0:a.AuthBirthDate),"\n          &transCheckName=").concat(encodeURIComponent("港澳台、中国护照客户身份核验"),"\n          "):(n.log("不支持核验"),"")}),k=()=>{var e={type:"2",url:g.value};v.sendNativeInstrution("toRemoteBank",e,()=>{n.log("remote data")})};return(e,t)=>{var l=(0,a.g2)("van-button"),i=(0,a.g2)("van-popup");return(0,a.uX)(),(0,a.Wv)(i,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e),position:"center",round:"",style:{width:"80%"},onCancel:d},{default:(0,a.k6)(()=>[(0,a.Lk)("div",o,[t[4]||(t[4]=(0,a.Lk)("div",{class:"cm-popup-title"},"温馨提示",-1)),t[5]||(t[5]=(0,a.Lk)("div",{class:"cm-popup-content"},[(0,a.Lk)("div",{class:"cm-row-thre-title"}," 您当前的交易存在风险，请您准备好有效证件，并点击下方呼叫按钮进行身份核查。 ")],-1)),(0,a.Lk)("div",s,[(0,a.bF)(l,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:d},{default:(0,a.k6)(()=>[...t[2]||(t[2]=[(0,a.eW)(" 关闭 ",-1)])]),_:1}),(0,a.bF)(l,{type:"primary",class:"cm-foot-btn-normal",block:"",onClick:t[0]||(t[0]=e=>k())},{default:(0,a.k6)(()=>[...t[3]||(t[3]=[(0,a.eW)(" 呼叫客服 ",-1)])]),_:1})]),t[6]||(t[6]=(0,a.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"])}}};const r=u;var v=r}}]);