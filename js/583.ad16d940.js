"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[583],{79583:function(e,a,l){l.r(a),l.d(a,{default:function(){return z}});l(62953);var t=l(95976),o=l(10160),n=l(29746),i={class:"main"},r={class:"field_wrap"},s={class:"_padding1015 _fz14 text-center"},u={class:"_marginBottom8"},v={class:"_fz16 UncommonShow"},c={class:"_marginBottom8"},d={class:"_marginBottom8 _fz30"},p={class:"_marginBottom8"},m={class:"_marginBottom8 _red _fw600"},f={key:0,class:"field_wrap"},k={key:1,class:"field_wrap"},y={key:2,class:"field_wrap"},C={class:"field_wrap"},h={class:"input_box"},L={class:"_blue"},_={class:"btn_wrap"},w=["onClick"],b={class:"_fz16"},P={class:"_padding1520 _marginBottom8"},g={class:"_padding1520 _marginBottom8"},N={class:"pop_box"},B={class:"pop_cont"},T={class:"_flex-center"},F={class:"pop_text"},x={class:"code_box"},S={class:"btn_wrap"};function I(e,a,l,I,E,A){var V=(0,t.g2)("van-icon"),W=(0,t.g2)("van-field"),D=(0,t.g2)("van-button"),R=(0,t.g2)("van-picker"),U=(0,t.g2)("van-popup"),K=(0,t.g2)("van-cascader"),M=(0,t.g2)("van-action-sheet"),O=(0,t.g2)("van-dialog"),z=(0,t.g2)("van-checkbox"),G=(0,t.g2)("van-password-input"),Q=(0,t.g2)("content-box");return(0,t.uX)(),(0,t.Wv)(Q,{class:"container",title:"账号转账",isBlockLeftEvent:!0,onClickLeft:I.goBack},{default:(0,t.k6)(()=>[(0,t.Lk)("div",i,[(0,t.Lk)("div",r,[a[26]||(a[26]=(0,t.Lk)("p",{class:"field_label"},"转入信息",-1)),(0,t.Lk)("div",s,[(0,t.Lk)("p",u,[(0,t.Lk)("span",v,(0,o.v_)(I.payeeInfo.PayeeAcName),1),(0,t.eW)(" ("+(0,o.v_)(I.payeeInfo.PayeeBankName)+") ",1)]),(0,t.Lk)("p",c,(0,o.v_)(I.payeeInfo.PayeeAcNo),1),(0,t.Lk)("p",d," ￥"+(0,o.v_)(e.$filters.formatAmount(I.transferAmount)),1),(0,t.Lk)("p",p," 人民币 "+(0,o.v_)(e.$filters.amountFormatWords(I.transferAmount)),1),(0,t.Lk)("p",m,[(0,t.bF)(V,{name:"warning",size:"18"}),(0,t.eW)(" 到帐方式："+(0,o.v_)(I.transferTypeName),1)])])]),!I.payeeInfo.isQZBank&&"3"==I.transferType&&I.clearBankList.length>1?((0,t.uX)(),(0,t.CE)("fieldset",f,[(0,t.bF)(W,{modelValue:I.payeeInfo.Name,"onUpdate:modelValue":a[0]||(a[0]=e=>I.payeeInfo.Name=e),label:"开户网点",placeholder:"请选择开户网点","right-icon":"arrow",readonly:"",onClick:a[1]||(a[1]=e=>I.toClearBankList("Name"))},null,8,["modelValue"])])):(0,t.Q3)("",!0),I.payeeInfo.isQZBank||"2"!=I.transferType?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("fieldset",k,[(0,t.bF)(W,{modelValue:I.cityName,"onUpdate:modelValue":a[2]||(a[2]=e=>I.cityName=e),label:"开户城市",placeholder:"请选择开户城市","right-icon":"arrow",readonly:"",onClick:a[3]||(a[3]=e=>I.showCityPicker("CityName"))},null,8,["modelValue"]),(0,t.bF)(W,{modelValue:I.payeeInfo.LName,"onUpdate:modelValue":a[4]||(a[4]=e=>I.payeeInfo.LName=e),label:"开户网点",placeholder:"请选择开户网点","right-icon":"arrow",readonly:"",onClick:a[5]||(a[5]=e=>I.showPicker("LName"))},null,8,["modelValue"])])),!I.payeeInfo.isQZBank&&["0","4","5"].includes(I.transferType)?((0,t.uX)(),(0,t.CE)("fieldset",y,[(0,t.bF)(W,{modelValue:I.netType,"onUpdate:modelValue":a[6]||(a[6]=e=>I.netType=e),label:"网点选择模式",placeholder:"","right-icon":"arrow",readonly:"",onClick:a[7]||(a[7]=e=>I.showPicker("netType"))},null,8,["modelValue"]),(0,t.bo)((0,t.bF)(W,{modelValue:I.payeeInfo.ProvinceName,"onUpdate:modelValue":a[8]||(a[8]=e=>I.payeeInfo.ProvinceName=e),label:"汇入地",placeholder:"请选择汇入地","right-icon":"arrow",readonly:"",onClick:a[9]||(a[9]=e=>I.showPicker("ProvinceName"))},null,8,["modelValue"]),[[n.aG,"指定行号入账"==I.netType]]),(0,t.bo)((0,t.bF)(W,{modelValue:I.payeeInfo.CityName,"onUpdate:modelValue":a[10]||(a[10]=e=>I.payeeInfo.CityName=e),label:"开户城市",placeholder:"请选择开户城市","right-icon":"arrow",readonly:"",onClick:a[11]||(a[11]=e=>I.showCityPicker("CityName"))},null,8,["modelValue"]),[[n.aG,"0"==I.transferType&&"手动选择"==I.netType]]),(0,t.bF)(W,{modelValue:I.payeeInfo.LName,"onUpdate:modelValue":a[12]||(a[12]=e=>I.payeeInfo.LName=e),label:"开户网点",placeholder:"请选择开户网点","right-icon":"arrow",readonly:"",onClick:a[13]||(a[13]=e=>I.showPicker("LName"))},null,8,["modelValue"])])):(0,t.Q3)("",!0),(0,t.Lk)("fieldset",C,[(0,t.bF)(W,{label:"认证方式",placeholder:"请选择认证方式","right-icon":"arrow",readonly:"",onClick:a[14]||(a[14]=e=>I.showPicker("authType"))},{input:(0,t.k6)(()=>{var l;return[(0,t.Lk)("div",h,[(0,t.Lk)("p",null,[(0,t.eW)((0,o.v_)(e.$dicts.transferDict.AuthTypeNew[I.authType])+" ",1),(0,t.bo)((0,t.Lk)("span",null,(0,o.v_)(I.CertStateName),513),[[n.aG,"0"!=(null===(l=I.userData)||void 0===l?void 0:l.CertState)&&"sf"==I.authType]])]),(0,t.bo)((0,t.Lk)("p",null,[a[27]||(a[27]=(0,t.eW)(" 当日剩余额度 ",-1)),(0,t.Lk)("span",L,(0,o.v_)(I.currentAuthBalance||"--"),1)],512),[[n.aG,I.authType]])])]}),_:1})]),(0,t.Lk)("div",_,[(0,t.bo)((0,t.bF)(D,{disabled:!I.nextFlag||I.protection,type:"primary",large:"",block:"",onClick:I.nextEvent},{default:(0,t.k6)(()=>[...a[28]||(a[28]=[(0,t.eW)("下一步",-1)])]),_:1},8,["disabled","onClick"]),[[n.aG,"1"==I.authType||"4"==I.authType]]),(0,t.bo)((0,t.bF)(D,{disabled:!I.nextFlag||I.protection,type:"primary",large:"",block:"",onClick:I.nextEvent},{default:(0,t.k6)(()=>[...a[29]||(a[29]=[(0,t.eW)("输入UKEY密码",-1)])]),_:1},8,["disabled","onClick"]),[[n.aG,"3"==I.authType]]),(0,t.bo)((0,t.bF)(D,{disabled:!I.nextFlag||I.protection,type:"primary",large:"",block:"",onClick:I.nextEvent},{default:(0,t.k6)(()=>[...a[30]||(a[30]=[(0,t.eW)("手机证书",-1)])]),_:1},8,["disabled","onClick"]),[[n.aG,"sf"==I.authType]])]),a[31]||(a[31]=(0,t.Lk)("div",{class:"tip_wrap"},[(0,t.Lk)("p",null,"泉州银行提醒您："),(0,t.Lk)("p",null,[(0,t.eW)(" 1.接到陌生电话或短信，不轻信、不转账，谨防电信"),(0,t.Lk)("span",{class:"_red"},"诈骗"),(0,t.eW)("。 ")]),(0,t.Lk)("p",null,[(0,t.eW)(" 2.若以"),(0,t.Lk)("span",{class:"_red"},"兼职刷单返利、虚假投资理财、虚假网络贷款、冒充快递客服理赔、冒充公检法、领导或亲人朋友"),(0,t.eW)("等为由要求进行的转账汇款，均属于"),(0,t.Lk)("span",{class:"_red"},"诈骗"),(0,t.eW)("。涉及不明资金的转账事宜，务必"),(0,t.Lk)("span",{class:"_red"},"当面或电话确认核实"),(0,t.eW)("，资金一旦转出无法追回。 ")]),(0,t.Lk)("p",{class:"_red"}," 3.不要向陌生人提供银行卡号、密码、短信验证码等个人信息，不扫来历不明的二维码、不点陌生人发来的链接、不安装不明APP。 ")],-1))]),(0,t.bF)(U,{show:I.isShowPicker,"onUpdate:show":a[16]||(a[16]=e=>I.isShowPicker=e),position:"bottom","close-on-popstate":"","close-on-click-overlay":""},{default:(0,t.k6)(()=>[(0,t.bF)(R,{title:I.pickerTtl,"columns-field-names":I.pickerName,columns:I.pickerList,onConfirm:I.onConfirm,onCancel:a[15]||(a[15]=e=>I.isShowPicker=!1)},null,8,["title","columns-field-names","columns","onConfirm"])]),_:1},8,["show"]),(0,t.bF)(U,{show:I.isShowArea,"onUpdate:show":a[19]||(a[19]=e=>I.isShowArea=e),position:"bottom","close-on-popstate":"","close-on-click-overlay":""},{default:(0,t.k6)(()=>[(0,t.bF)(K,{modelValue:I.cityName,"onUpdate:modelValue":a[17]||(a[17]=e=>I.cityName=e),title:I.pickerTtl,"field-names":I.areadName,options:I.areaList,onClose:a[18]||(a[18]=e=>I.isShowArea=!1),onFinish:I.selectCity,onChange:I.showMoreCity},null,8,["modelValue","title","field-names","options","onFinish","onChange"])]),_:1},8,["show"]),(0,t.bF)(M,{show:I.isShowAuthType,"onUpdate:show":a[20]||(a[20]=e=>I.isShowAuthType=e),title:"请选择认证方式",closeable:!1},{default:(0,t.k6)(()=>[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(I.authTypeList,e=>{var a,l,i,r,s,u;return(0,t.uX)(),(0,t.CE)("div",{class:"picker_item",key:e.value,onClick:a=>I.selectAuthType(e)},[(0,t.Lk)("div",b,(0,o.v_)(e.name),1),(0,t.bo)((0,t.Lk)("div",{class:"_red"},(0,o.v_)("1"==(null===(a=I.userData)||void 0===a?void 0:a.CertState)?"去安装":"2"==(null===(l=I.userData)||void 0===l?void 0:l.CertState)?"去解锁":"3"==(null===(i=I.userData)||void 0===i?void 0:i.CertState)?"去更新":""),513),[[n.aG,"sf"==e.value&&!e.isValid]]),(0,t.bo)((0,t.Lk)("div",{class:"sf_text _fz12 _red"},(0,o.v_)(e.isOpen?"1"==(null===(r=I.userData)||void 0===r?void 0:r.CertState)?"已开通，未安装":"2"==(null===(s=I.userData)||void 0===s?void 0:s.CertState)?"已开通，已锁定":"3"==(null===(u=I.userData)||void 0===u?void 0:u.CertState)?"证书已过期":"":"未开通"),513),[[n.aG,"sf"==e.value]]),(0,t.bo)((0,t.Lk)("div",{class:"sf_text _fz12 _red"},(0,o.v_)(e.isOpen?"已开通":"未开通"),513),[[n.aG,"sf"!=e.value&&"1"!=e.value]])],8,w)}),128))]),_:1},8,["show"]),(0,t.bF)(O,{show:I.showRiskPop,"onUpdate:show":a[21]||(a[21]=e=>I.showRiskPop=e),title:"风险提示","confirm-button-text":I.confirmBtnText,"cancel-button-text":"关闭",showCancelButton:!0,onCancel:I.cancelEvent,onConfirm:I.confirmEvent},{default:(0,t.k6)(()=>[(0,t.Lk)("div",P,[(0,t.Lk)("p",null,(0,o.v_)(I.riskText),1),a[32]||(a[32]=(0,t.Lk)("p",null,"您也可至线下营业网点办理",-1))])]),_:1},8,["show","confirm-button-text","onCancel","onConfirm"]),(0,t.bF)(O,{show:I.showLimitPop,"onUpdate:show":a[23]||(a[23]=e=>I.showLimitPop=e),title:"温馨提示","confirm-button-text":"继续转账","cancel-button-text":"取消转账",showCancelButton:!0,onCancel:I.hideLimitPop,onConfirm:I.continueEvent},{default:(0,t.k6)(()=>[(0,t.Lk)("div",g,[a[34]||(a[34]=(0,t.Lk)("div",{class:"_fz16 _grey"},[(0,t.Lk)("p",{class:"marginRow10"}," 您当日累计交易金额较大,为了您的资金安全,请勿向不明帐户进行转账,以免落入诈骗陷阱。 "),(0,t.Lk)("p",{class:"marginRow10"},"请确认您已了解收款人真实性。")],-1)),(0,t.bF)(z,{name:"1",modelValue:I.limitTipFlag,"onUpdate:modelValue":a[22]||(a[22]=e=>I.limitTipFlag=e)},{default:(0,t.k6)(()=>[...a[33]||(a[33]=[(0,t.Lk)("span",null,"不再提醒",-1)])]),_:1},8,["modelValue"])])]),_:1},8,["show","onCancel","onConfirm"]),(0,t.bF)(U,{show:I.isShowPop,"onUpdate:show":a[25]||(a[25]=e=>I.isShowPop=e),round:"",closeable:"","close-on-popstate":"","close-on-click-overlay":!1,onClickCloseIcon:I.closePop},{default:(0,t.k6)(()=>{var e;return[(0,t.Lk)("div",N,[a[35]||(a[35]=(0,t.Lk)("div",{class:"pop_ttl"},"信息认证",-1)),(0,t.Lk)("div",B,[(0,t.Lk)("div",T,[(0,t.Lk)("div",F," 已向您手机号“"+(0,o.v_)(null===(e=I.netBankLoginInfo)||void 0===e?void 0:e.MobilePhone.slice(-4))+"”发送短信验证码(1分钟有效) ",1),(0,t.bF)(D,{class:"code_btn",size:"small",type:"primary",disabled:I.countdown>0,onClick:I.getCode},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)(I.countdown>0?"重新获取(".concat(I.countdown,")s"):"重新获取"),1)]),_:1},8,["disabled","onClick"])]),(0,t.Lk)("div",x,[(0,t.bF)(W,{class:"code_input",modelValue:I.verifyCode,"onUpdate:modelValue":a[24]||(a[24]=e=>I.verifyCode=e),type:"digit"},null,8,["modelValue"]),(0,t.bF)(G,{class:"pwd_input",ref:"pwdRef",value:I.verifyCode,mask:!1,length:"6",inputmode:"none"},null,8,["value"])]),(0,t.Lk)("div",S,[(0,t.bF)(D,{disabled:!I.verifyFlag,type:"primary",large:"",block:"",onClick:I.validateCode},{default:(0,t.k6)(()=>[(0,t.eW)((0,o.v_)("4"==I.authType?"输入UKEY密码":"输入卡密"),1)]),_:1},8,["disabled","onClick"])])])])]}),_:1},8,["show","onClickCloseIcon"])]),_:1},8,["onClickLeft"])}var E=l(9424),A=(l(27420),l(11185)),V=(l(27495),l(25440),l(44114),l(18111),l(22489),l(20116),l(61701),l(58335),l(12040)),W=l(39053),D=l(84875),R=l(51449),U=l(53620),K={name:"ConfirmTransfer",setup(){var{state:e,commit:a,dispatch:l}=(0,R.Pj)(),o=(0,W.rd)(),{proxy:n,appContext:i}=(0,t.nI)(),{$qzbankBridge:r,$dicts:s}=i.config.globalProperties,u=(0,t.EW)(()=>e.transfer.userData),v=(0,t.EW)(()=>e.transfer.netBankLoginInfo),c=(0,t.EW)(()=>e.transfer.limitInfo),d=(0,t.EW)(()=>e.transfer.protection),p=(0,t.EW)(()=>e.transfer.submitParams),m=(0,t.EW)(()=>e.transfer.payeeInfo),f=(0,t.EW)(()=>e.transfer.transferAmount),k=(0,t.EW)(()=>e.transfer.transferType),y=(0,V.KR)(""),C=(0,t.EW)(()=>e.transfer.riskFlag),h=(0,t.EW)(()=>e.transfer.netType),L=(0,t.EW)(()=>e.transfer.clearBankList),_=(0,t.EW)(()=>e.transfer.clearBankInfo),w=(0,t.EW)(()=>e.transfer.authTypeList),b=(0,t.EW)(()=>e.transfer.authType),P=(0,V.KR)(!0),g=(0,V.KR)(""),N=(0,V.KR)(""),B=(0,V.KR)(!1),T=(0,V.KR)(""),F=(0,V.KR)(!1),x=(0,V.KR)(!1),S=(0,V.KR)(""),I={text:"name",value:"value"},K=(0,V.KR)([]),M=(0,V.KR)(!1),O=(0,V.KR)(""),z={text:"name",value:"value",children:"children"},G=(0,V.KR)([]),Q=(0,t.EW)(()=>e.transfer.showRiskPop),X=(0,t.EW)(()=>e.transfer.riskText),Z=(0,t.EW)(()=>e.transfer.confirmBtnText),$=(0,t.EW)(()=>e.transfer.showLimitPop),J=(0,V.KR)(!1),Y=(0,t.EW)(()=>e.transfer.isShowPop),j=(0,V.KR)(0),q=(0,V.KR)(null),H=(0,V.KR)(""),ee=(0,V.KR)(!1);(0,t.wB)(()=>b.value,e=>{var a,l,t,o,n;"1"==e&&(parseFloat(f.value)<=parseFloat(null===(a=c.value)||void 0===a?void 0:a.S_LimitPerTrs)&&parseFloat(f.value)<=parseFloat(null===(l=c.value)||void 0===l?void 0:l.S_LimitPerDay)&&parseFloat(f.value)<=parseFloat(null===(t=c.value)||void 0===t?void 0:t.S_LimitPerDayForLeave)?P.value=!1:P.value=!0,N.value=null===(o=c.value)||void 0===o?void 0:o.S_LimitPerDayForLeave);if("sf"==e&&P.value){var i,r,v;if(null!==(i=c.value)&&void 0!==i&&i.MC_LimitPerDayForLeave)N.value=null===(v=c.value)||void 0===v?void 0:v.MC_LimitPerDayForLeave;null!==(r=u.value)&&void 0!==r&&r.CertState&&(g.value=s.transferDict.CertStateDict.find(e=>{var a;return e.id==(null===(a=u.value)||void 0===a?void 0:a.CertState)}).title)}"3"!=e&&"4"!=e||!P.value||(N.value=null===(n=c.value)||void 0===n?void 0:n.C_LimitPerDayForLeave)},{deep:!0,immediate:!0}),(0,t.wB)(()=>Y.value,e=>{e&&(j.value=60,he())},{deep:!0,immediate:!0}),(0,t.wB)(()=>H.value,e=>{e&&6==e.length&&(ee.value=!0)},{deep:!0,immediate:!0}),(0,t.wB)(()=>m.value,e=>{e.CityName&&e.ProvinceName&&(O.value="".concat(e.ProvinceName,"-").concat(e.CityName)),ie()}),(0,t.wB)(()=>_.value,e=>{U.info(e),ie()}),(0,t.sV)(()=>{"sf"==b.value&&se(),"3"==b.value&&ue(),y.value=m.value.isQZBank?s.transferDict.QzBankTransferType[k.value]:s.transferDict.OtherBankTransferType[k.value],ie()}),(0,D.JZ)((e,a,l)=>{"/BankResult"==e.path?l("/"):l()}),(0,t.hi)(()=>{q.value&&clearInterval(q.value)});var ae=()=>{o.push({path:"/ClearBankList"})},le=e=>{if(S.value=e,K.value=[],"netType"==e&&(T.value="请选择网点选择方式","0"==k.value&&(K.value=[{name:"指定行号入账",value:1},{name:"手动选择",value:2}]),"4"!=k.value&&"5"!=k.value||(K.value=[{name:"指定行号入账",value:1}]),F.value=!0),"ProvinceName"==e&&(T.value="请选择汇入地",l("transfer/getProvinceList").then(e=>{if(e&&e.length){var a=e.map(e=>({value:e.value,name:e.name}));K.value=a,F.value=!0}})),"LName"==e&&!m.value.isQZBank&&m.value.ProvinceName&&o.push({path:"/NetWorkList"}),"authType"==e){if(!P.value)return;x.value=!0}},te=e=>{S.value=e,"CityName"==e&&l("transfer/getProvinceList").then(e=>{e&&e.length&&(G.value=e,M.value=!0)})},oe=e=>{"netType"==S.value&&(a("transfer/setPayeeInfo",{ProvinceName:"",ProvinceCode:"",CityName:"",CityCode:"",LName:"",BankCode:"",DrecCode:""}),a("transfer/setNetType",e.name)),"ProvinceName"==S.value&&(a("transfer/setPayeeInfo",{ProvinceName:e.name,ProvinceCode:e.value,LName:"",BankCode:"",DrecCode:""}),a("transfer/setClearBankInfo",{Name:"",LName:"",ProvinceName:e.name,CityName:""}),l("transfer/getBranchList","0")),T.value="",S.value="",F.value=!1,ie()},ne=e=>{if(e.isOpen){if("1"==e.value)return;"sf"==e.value&&se(),"3"!=e.value&&"4"!=e.value||ue()}else"1"==e.value&&A.A.confirm({title:"温馨提示",message:"手机短信未开通",confirmButtonText:"确定",confirmButtonColor:"#1989Fa",showCancelButton:!1}),"3"!=e.value&&"4"!=e.value||A.A.confirm({title:"温馨提示",message:"当前暂不支持该认证方式".concat("3"==e.value?"(蓝牙Ukey)":"4"==e.value?"(手机短信+蓝牙Ukey)":""),confirmButtonText:"确定",confirmButtonColor:"#1989Fa",showCancelButton:!1}),"sf"==e.value&&se();x.value=!1,ie()},ie=()=>{var e;if(b.value)if("泉州银行"==m.value.PayeeBankName)B.value=!0;else if("3"==k.value)B.value=Boolean((null===(e=_.value)||void 0===e?void 0:e.Name)&&_.value.Value);else if("2"==k.value){var a,l;B.value=Boolean((null===(a=m.value)||void 0===a?void 0:a.CityName)&&(null===(l=m.value)||void 0===l?void 0:l.LName))}else{var t,o,n,i;if("手动选择"==h.value&&"0"==k.value)B.value=Boolean(h.value&&(null===(t=m.value)||void 0===t?void 0:t.CityName)&&(null===(o=m.value)||void 0===o?void 0:o.LName));else B.value=Boolean(h.value&&(null===(n=m.value)||void 0===n?void 0:n.ProvinceName)&&(null===(i=m.value)||void 0===i?void 0:i.LName))}else B.value=!1},re=()=>{var e,l,t,o,n,i,r,s,u={CertType:"sf"==b.value?b.value:"",AuthType:"sf"!=b.value?b.value:""};"泉州银行"!=(null===(e=m.value)||void 0===e?void 0:e.PayeeBankName)&&("3"!=k.value&&(u=(0,E.A)((0,E.A)({},u),{},{CityCode:null===(l=m.value)||void 0===l?void 0:l.CityCode,ProvinceCode:null===(t=m.value)||void 0===t?void 0:t.ProvinceCode,ProvinceName:null===(o=m.value)||void 0===o?void 0:o.ProvinceName,CityName:null===(n=m.value)||void 0===n?void 0:n.CityName,PayeeAddr:null===(i=m.value)||void 0===i?void 0:i.LName,PayeeClearBankId:null===(r=m.value)||void 0===r?void 0:r.DrecCode,UnionDeptId:null===(s=m.value)||void 0===s?void 0:s.BankCode})));a("transfer/setSubmitParams",u)},se=(e,t)=>{var o=w.value.filter(e=>"sf"==e.value),n=o[0];n.isOpen&&n.isValid&&r.sendNativeInstrution("getUserAllData",{},l=>{var o=JSON.parse(l);if(o.certUpdateFlag&&"Y"==o.certUpdateFlag)A.A.confirm({title:"温馨提示",message:"当前手机证书正在自动安装，暂时不可用，请稍后重试",confirmButtonText:"确定",confirmButtonColor:"#1989Fa",showCancelButton:!1}).then(()=>{ue()});else{var i=e?null===t||void 0===t?void 0:t.MC_LimitPerTrs:c.value.MC_LimitPerTrs,r=e?null===t||void 0===t?void 0:t.MC_LimitPerDay:c.value.MC_LimitPerDay,s=e?null===t||void 0===t?void 0:t.MC_LimitPerDayForLeave:c.value.MC_LimitPerDayForLeave;parseFloat(f.value)<=parseFloat(i)&&parseFloat(f.value)<=parseFloat(r)&&parseFloat(f.value)<=parseFloat(s)?(N.value=s,a("transfer/setAuthType",n.value)):ue()}}),n.isOpen&&!n.isValid&&A.A.confirm({title:"温馨提示",message:"证书异常",cancelButtonText:"取消",confirmButtonText:"去安装",confirmButtonColor:"#1989Fa"}).then(()=>{var e="1"==u.value.CertState?"open":"2"==u.value.CertState?"unlock":"3"==u.value.CertState?"update":"";l("transfer/getBussNo").then(a=>{r.sendNativeInstrution("mobileCertManager",{operType:e,BussNo:a,SceneCode:"MobileSoftCertNotify"},()=>{ce()})})}).catch(()=>{ue()}),n.isOpen||A.A.confirm({title:"温馨提示",message:"您的认证介质额度不足，申请手机证书，提高转账额度",confirmButtonText:"去申请",confirmButtonColor:"#1989Fa"}).then(()=>{l("transfer/getBussNo").then(e=>{r.sendNativeInstrution("mobileCertManager",{operType:"open",BussNo:e,SceneCode:"MobileSoftCertNotify"},()=>{ce()})})}).catch(()=>{ue()})},ue=()=>{var e="";if(parseFloat(f.value)<=parseFloat(c.value.C_LimitPerTrs)&&parseFloat(f.value)<=parseFloat(c.value.C_LimitPerDay)&&parseFloat(f.value)<=parseFloat(c.value.C_LimitPerDayForLeave)){var l=w.value.slice(-1),t=l[0];e=t&&null!==t&&void 0!==t&&t.value&&null!==t&&void 0!==t&&t.isOpen&&t&&"1"!=(null===t||void 0===t?void 0:t.value)&&"sf"!=(null===t||void 0===t?void 0:t.value)?null===t||void 0===t?void 0:t.value:""}else e="";e||(A.A.confirm({title:"温馨提示",message:"您输入的转账金额已超过当前介质转账限额，请联系客服：40088-96312",showCancelButton:!1,confirmButtonText:"好的",confirmButtonColor:"#1989Fa"}),B.value=!1),b.value=e,a("transfer/setAuthType",e)},ve=()=>{re(),l("transfer/riskBankCheck")},ce=()=>{r.sendNativeInstrution("getUserAllData",{},e=>{var t=JSON.parse(e);a("transfer/setUserData",t),l("transfer/getLimitInfo",{type:"sf"}).then(e=>{se("sf",e)})})},de=e=>{var{selectedOptions:l}=e,t=l.map(e=>({text:e.name,value:e.value}));O.value=t.length?t.map(e=>e.text).join(" - "):"",a("transfer/setPayeeInfo",{ProvinceName:t[0].text,ProvinceCode:t[0].value,CityName:t[1].text,CityCode:t[1].value,LName:"",DrecCode:"",BankCode:""}),M.value=!1,ie()},pe=e=>{var{value:a,tabIndex:t}=e;0==t&&l("transfer/getAreaList",{value:a}).then(e=>{e&&e.length&&(G.value=e)}),ie()},me=()=>{a("transfer/setRiskPop",{confirmBtnText:"",riskText:"",showRiskPop:!1})},fe=()=>{switch(a("transfer/setRiskPop",{confirmBtnText:"",riskText:"",showRiskPop:!1}),C.value){case"1":l("transfer/toRemoteBankNotice");break;case"2":l("transfer/timeValidate");break;default:l("transfer/validateOCR");break}},ke=()=>{a("transfer/setShowLimitPop",!1)},ye=()=>{a("transfer/setShowLimitPop",!1),a("transfer/setSubmitParams",{RiskNoticeFlag:"1",NotifyFlag:J.value?"0":v.value.TransferNotifyFlag}),l("transfer/confirmSubmit")},Ce=()=>{j.value>0||(j.value=60,l("transfer/getVerifyCode").then(()=>{he()}))},he=()=>{q.value=setInterval(()=>{j.value>0?j.value--:(clearInterval(q.value),q.value=null)},1e3)},Le=()=>{Y.value=!1,a("transfer/setShowPop",!1),H.value=""},_e=()=>{l("transfer/validateCode",{code:H.value}).then(()=>{n.$sensors.track("AP_TransferProcess",{transfer_type:"账号转账",transfer_page:"转账确认页",is_success:!0,fail_reason:""}),"1"==b.value&&l("transfer/submitEvent"),"4"==b.value&&l("transfer/callBleToothKeyBoard")})},we=()=>{o.replace({path:"/BankCardTransfer",query:{fromPage:"ConfirmTransfer"}})};return{userData:u,netBankLoginInfo:v,limitInfo:c,protection:d,submitParams:p,payeeInfo:m,transferAmount:f,transferType:k,transferTypeName:y,riskFlag:C,netType:h,clearBankList:L,clearBankInfo:_,authType:b,authTypeList:w,canSelect:P,CertStateName:g,currentAuthBalance:N,nextFlag:B,pickerTtl:T,isShowPicker:F,isShowAuthType:x,pickerType:S,pickerName:I,isShowArea:M,cityName:O,areadName:z,pickerList:K,areaList:G,showRiskPop:Q,confirmBtnText:Z,riskText:X,showLimitPop:$,limitTipFlag:J,isShowPop:Y,countdown:j,verifyCode:H,verifyFlag:ee,toClearBankList:ae,showPicker:le,nextEvent:ve,onConfirm:oe,selectAuthType:ne,selectCity:de,showMoreCity:pe,confirmEvent:fe,cancelEvent:me,hideLimitPop:ke,continueEvent:ye,getCode:Ce,validateCode:_e,closePop:Le,showCityPicker:te,goBack:we}}},M=l(1169);const O=(0,M.A)(K,[["render",I],["__scopeId","data-v-e8f65172"]]);var z=O}}]);