"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[389],{65389:function(e,a,n){n.r(a),n.d(a,{default:function(){return U}});var t=n(698),o=(n(65083),n(64520)),l=(n(44114),n(18111),n(7588),n(58335),n(95976)),i=n(29746),r=n(10160),s=n(12040),c=n(86635),v=n(39053),d=n(51449),u=n(86108),p=n(95400),k=n(78588),m=n(92369),f=n(53620),h={class:"no_data"},g={class:"list"},T=["onClick"],y={class:"top-row"},b={class:"title-icon"},L=["src"],_={class:"title"},x={class:"bank"},S={class:"middle-row"},C={class:"name Uncommonlabel",id:"Uncommonlabel"},N={class:"amount"},A={class:"bottom-row"},w={class:"button-container fixedBtn"},F={class:"pop-content"},I={class:"menuBtnList"},W={class:"scroll-box"},E={class:"pop-content"},P={class:"menuBtnList"},M={class:"scroll-box"},R={__name:"AdvanceList",setup(e){var{state:a,commit:n,dispatch:R}=(0,d.Pj)(),D=(0,v.rd)(),K=(0,l.EW)(()=>a.advanceTransfer.taskNameMenu),U=(0,l.EW)(()=>a.advanceTransfer.iconDict);n("advanceTransfer/resetPageIndex");var X=(0,l.EW)(()=>a.advanceTransfer.advanceList),B=(0,s.KR)(!1),z=(0,l.EW)(()=>a.advanceTransfer.loading),q=(0,l.EW)(()=>a.advanceTransfer.error),V=(0,l.EW)(()=>a.advanceTransfer.finished),Y=(0,s.KR)(!1),J=(0,s.KR)([{name:"撤销预约",operType:"2",supportMultiple:!0},{name:"修改预约",operType:"8",supportMultiple:!1},{name:"删除记录",operType:"4",supportMultiple:!0},{name:"暂停预约",operType:"3",supportMultiple:!0},{name:"恢复预约",operType:"0",supportMultiple:!1}]),$=function(){(0,m.loadBundle)().then(()=>{var e=[".Uncommonlabel"];setTimeout(function(){(0,m.getUnCommonWordConfig)(function(a){new UncommonWordShow(e,a)})},500)})};(0,l.wB)(()=>a.advanceTransfer.advanceList,e=>{$()},{deep:!0,immediate:!0}),(0,l.sV)(()=>{var e;0==(null===(e=K.value)||void 0===e?void 0:e.length)&&ee(!1),ae(),(0,l.dY)(()=>{$()})});var O=()=>{H()},Q=e=>{p.fI({OperType:e.operType}).then(a=>{var t,l=(0,s.KR)(null===a||void 0===a?void 0:a.List);(null===(t=l.value)||void 0===t?void 0:t.length)>0?(l.value.forEach(e=>{void 0!=e.TaskName&&""!=e.TaskName||(e.TaskName="自定义"),e["icon"]=U[e.TaskName]||"",""==e["icon"]&&(e["icon"]=U.value["自定义"]||""),e[e.JnlNo]=!1}),n("advanceTransfer/setState",{key:"advanceManagerSelect",value:[]}),n("advanceTransfer/setState",{key:"advanceManagerInfo",value:e}),n("advanceTransfer/setState",{key:"advanceManagerList",value:l.value}),D.push({path:"/AdvanceManagerList",query:{homeSize:1,fromPage:"AdvanceList"}})):(0,o.A)("暂无可"+e.name+"数据")})},j=e=>{n("advanceTransfer/resetPayeeInfo"),n("advanceTransfer/setState",{key:"advanceSelectInfos",value:{taskName:e.text,customizeName:""}}),D.push({path:"/AdvanceInput",query:{homeSize:1,fromPage:"AdvanceList"}})},G=e=>{f.log("选择的数据:",e),n("advanceTransfer/setState",{key:"advanceDetailInfo",value:e}),D.push({path:"/AdvanceDetail",query:{homeSize:1,fromPage:"AdvanceList"}})},Z=()=>{Y.value=!0},H=()=>{var e;(null===(e=K.value)||void 0===e?void 0:e.length)>0?B.value=!0:ee(!0)},ee=e=>{c.sendNativeInstrution("getDeviceInfo",{},function(){var a=(0,t.A)(function*(a){var t,l,i=JSON.parse(a),r=i.data,c={YPT0ReqData:{workbankSymbol:"schedule_transfer",tabBarSymbol:"",channelNo:r.channelNo,appVersion:r.appVersion},needNativePop:"false",ServerType:"YWZT"},v=yield(0,u.cL)(c),d=null===v||void 0===v||null===(t=v.YPT0ResData)||void 0===t||null===(t=t.workbankVo)||void 0===t?void 0:t.children,p=(0,s.KR)({});if((null===d||void 0===d?void 0:d.length)>0)for(var k=0;k<d.length;k++){var m,f,h=null===(m=d[k])||void 0===m?void 0:m.text,g=null===(f=d[k])||void 0===f?void 0:f.icon;""!=h&&(p.value[h]=g)}(n("advanceTransfer/setState",{key:"taskNameMenu",value:d}),n("advanceTransfer/setState",{key:"iconDict",value:p.value}),e)?(null===(l=K.value)||void 0===l?void 0:l.length)>0?B.value=!0:(0,o.A)("暂无数据"):n("advanceTransfer/adpaterTaskNameIcon")});return function(e){return a.apply(this,arguments)}}())},ae=e=>{R("advanceTransfer/getAdvanceList",e)},ne=()=>R("advanceTransfer/loadList",{});return(e,a)=>{var n=(0,l.g2)("van-empty"),t=(0,l.g2)("van-tag"),o=(0,l.g2)("van-card"),c=(0,l.g2)("van-list"),v=(0,l.g2)("van-button"),d=(0,l.g2)("content-box"),u=(0,l.g2)("van-grid-item"),p=(0,l.g2)("van-grid"),m=(0,l.g2)("van-action-sheet");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.bF)(d,{class:"containers",title:"预约转账列表"},{default:(0,l.k6)(()=>[(0,l.bo)((0,l.Lk)("div",h,[(0,l.bF)(n,{description:"暂无预约数据"})],512),[[i.aG,0==X.value.length]]),(0,l.Lk)("div",g,[X.value.length?((0,l.uX)(),(0,l.Wv)(c,{key:0,loading:z.value,"onUpdate:loading":a[0]||(a[0]=e=>z.value=e),error:q.value,"onUpdate:error":a[1]||(a[1]=e=>q.value=e),finished:V.value,offset:"60","finished-text":"加载完成","error-text":"加载失败",onLoad:ne},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(X.value,a=>((0,l.uX)(),(0,l.CE)("div",{class:"content",key:a.JnlNo},[(0,l.Lk)("div",{class:"publicBox",onClick:(0,i.D$)(e=>G(a),["stop"])},[(0,l.bF)(o,null,{title:(0,l.k6)(()=>{var n;return[(0,l.Lk)("div",y,[(0,l.Lk)("div",b,[""!=a.icon?((0,l.uX)(),(0,l.CE)("img",{key:0,src:a.icon,style:{width:"20px",height:"20px"}},null,8,L)):(0,l.Q3)("",!0),(0,l.Lk)("span",_,(0,r.v_)(e.$filters.taskNameSlice(a.TaskName,4)),1)]),(0,l.Lk)("span",x,"转至"+(0,r.v_)(a.PayeeBankName)+"("+(0,r.v_)(null===(n=a.PayeeAcNo)||void 0===n?void 0:n.slice(-4))+")",1),(0,l.bF)(t,{class:"tag-icon",color:(0,s.R1)(k.A).TimerStateColor[a.TimerState].bgColor,"text-color":(0,s.R1)(k.A).TimerStateColor[a.TimerState].textColor},{default:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)((0,s.R1)(k.A).TimerState[a.TimerState]),1)]),_:2},1032,["color","text-color"])])]}),desc:(0,l.k6)(()=>[(0,l.Lk)("div",S,[(0,l.Lk)("span",C,(0,r.v_)(a.PayeeAcName),1),(0,l.Lk)("span",N,"¥ "+(0,r.v_)(e.$filters.formatAmount(a.Amount)),1)])]),footer:(0,l.k6)(()=>[(0,l.Lk)("div",A,[(0,l.Lk)("span",null,"转出日："+(0,r.v_)(a.DisplayContext),1)])]),_:2},1024)],8,T)]))),128))]),_:1},8,["loading","error","finished"])):(0,l.Q3)("",!0)]),(0,l.Lk)("div",w,[(0,l.bF)(v,{type:"primary",text:"管理",class:"add-button button-left",onClick:a[2]||(a[2]=e=>Z())}),(0,l.bF)(v,{type:"primary",text:"新建",class:"add-button button-right",onClick:a[3]||(a[3]=e=>O())})])]),_:1}),(0,l.bF)(m,{show:B.value,"onUpdate:show":a[4]||(a[4]=e=>B.value=e),"cancel-text":"取消","close-on-click-action":""},{default:(0,l.k6)(()=>[(0,l.Lk)("div",F,[(0,l.Lk)("div",I,[(0,l.Lk)("div",W,[(0,l.bF)(p,{"column-num":"3",border:!1,"icon-size":"32"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(K.value,(e,a)=>((0,l.uX)(),(0,l.Wv)(u,{key:a,icon:e.icon,text:e.text,onClick:a=>j(e)},null,8,["icon","text","onClick"]))),128))]),_:1})])])])]),_:1},8,["show"]),(0,l.bF)(m,{show:Y.value,"onUpdate:show":a[5]||(a[5]=e=>Y.value=e),"cancel-text":"取消","close-on-click-action":""},{default:(0,l.k6)(()=>[(0,l.Lk)("div",E,[(0,l.Lk)("div",P,[(0,l.Lk)("div",M,[(0,l.bF)(p,{"column-num":"1","icon-size":"0"},{default:(0,l.k6)(()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(J.value,(e,a)=>((0,l.uX)(),(0,l.Wv)(u,{icon:"",key:a,onClick:a=>Q(e),style:{"--van-grid-item-icon-size":"0"}},{text:(0,l.k6)(()=>[(0,l.eW)((0,r.v_)(e.name),1)]),_:2},1032,["onClick"]))),128))]),_:1})])])])]),_:1},8,["show"])],64)}}},D=n(1169);const K=(0,D.A)(R,[["__scopeId","data-v-008845bb"]]);var U=K}}]);