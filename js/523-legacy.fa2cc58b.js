"use strict";(self["webpackChunkharmony_transfer"]=self["webpackChunkharmony_transfer"]||[]).push([[523],{77523:function(e,t,l){l.r(t),l.d(t,{default:function(){return K}});l(62953),l(44114),l(58335);var i=l(95976),a=l(10160),o=l(29746),n=l(12040),s=l(39053),u=l(86635),r=l(37868),v=l(51449),d=l(93336),c=l(51884),m=l(53620),p={class:"my-group"},k={class:"my-title-box"},y={class:"input-box"},g={class:"my-group"},L={class:"my-title-box"},f={class:"input-box"},h={class:"agree-proto-box"},b={class:"submitBtn"},C={class:"pop-wrap"},_={class:"pop-btn"},P={class:"cm-popup-wrap"},R={class:"cm-popup-content"},U={class:"cm-row-thre-title"},S={class:"cm-popup-foot"},w={__name:"UKeyLimitSetting",setup(e){var t=(0,n.KR)(!1),l=(0,n.KR)({}),{state:w,commit:A}=(0,v.Pj)(),F=(0,i.EW)(()=>w.transferSetting.transferLimitSetting),K=(0,i.EW)(()=>w.transferSetting.ukeyLimitRequest),N=(0,s.rd)(),T=(0,n.KR)(""),x=(0,n.KR)(""),D=(0,n.KR)(!1),I=(0,n.KR)(),B=(0,i.EW)(()=>{var e;return null===(e=I.value)||void 0===e?void 0:e.AuthType}),W=(0,n.KR)(!1),q=(0,n.KR)(""),V=(0,n.KR)(""),M=(0,n.KR)("");(0,i.sV)(()=>{E(),O()});var O=()=>{var e,t,l,i,a;(null===(e=K.value)||void 0===e||null===(e=e.C_LimitPerTrs)||void 0===e?void 0:e.length)>0?T.value=K.value.C_LimitPerTrs:T.value=null===(l=F.value)||void 0===l?void 0:l.C_LimitPerTrs;(null===(t=K.value)||void 0===t||null===(t=t.C_LimitPerDay)||void 0===t?void 0:t.length)>0?x.value=null===(i=K.value)||void 0===i?void 0:i.C_LimitPerDay:x.value=null===(a=F.value)||void 0===a?void 0:a.C_LimitPerDay},E=()=>{var e,t=navigator.userAgent.indexOf("Qzccbank")>-1;t?u.sendNativeInstrution("getUserAllData",{},e=>{var t=JSON.parse(e);if("true"==(null===t||void 0===t?void 0:t.NetBankLoginStatus)){var l=null===t||void 0===t?void 0:t.netBankLoginInfo;I.value=l}}):I.value=null===(e=w.user)||void 0===e?void 0:e.pwebUser},j=(0,i.EW)(()=>{var e,t;return D.value&&(null===(e=T.value)||void 0===e?void 0:e.length)>0&&(null===(t=x.value)||void 0===t?void 0:t.length)>0}),X=(0,n.KR)(!1),Y=()=>{T.value=""},J=()=>{x.value=""},z=()=>{Q(),D.value=!D.value,N.push({path:"/Negotias"})},G=()=>{j.value&&("1"==B.value||"7"==B.value?(X.value=!0,Q()):"3"==B.value?c.l.alert({message:"当前暂不支持该认证方式(蓝牙Ukey)"}).then({}):c.l.alert({message:"暂不支持该认证方式"}).then({}))},Q=()=>{var e,t,l,i,a,o,n;A("transferSetting/setUKeyLimitRequestParms",["C_LimitPerTrs",T.value]),A("transferSetting/setUKeyLimitRequestParms",["C_LimitPerDay",x.value]),A("transferSetting/setUKeyLimitRequestParms",["S_LimitPerTrs",null===(e=F.value)||void 0===e?void 0:e.S_LimitPerTrs]),A("transferSetting/setUKeyLimitRequestParms",["S_LimitPerDay",null===(t=F.value)||void 0===t?void 0:t.S_LimitPerDay]),A("transferSetting/setUKeyLimitRequestParms",["LimitTimesPerDay",null===(l=F.value)||void 0===l?void 0:l.LimitTimesPerDay]),A("transferSetting/setUKeyLimitRequestParms",["LimitPerYear",null===(i=F.value)||void 0===i?void 0:i.LimitPerYear]),A("transferSetting/setUKeyLimitRequestParms",["OldLimitTimesPerDay",null===(a=F.value)||void 0===a?void 0:a.LimitTimesPerDay]),A("transferSetting/setUKeyLimitRequestParms",["OldLimitPerYear",null===(o=F.value)||void 0===o?void 0:o.LimitPerYear]),A("transferSetting/setUKeyLimitRequestParms",["OldCLimitPerTrs",null===(n=F.value)||void 0===n?void 0:n.C_LimitPerTrs])},$=()=>{H("1"),Z()},H=e=>{A("transferSetting/setUKeyLimitRequestParms",["AuthType",e])},Z=()=>{r.U2({SceneCode:"MobileUsrActLimitMng"}).then(e=>{ee(null===e||void 0===e?void 0:e.BussNo)})},ee=e=>{var i,a=e;r.w2({SceneCode:"MobileUsrActLimitMng",BussNo:a,s:w.transferSetting.PayegisDID,TransFaceCode:"xgxe",C_LimitPerTrs:T.value,OldCLimitPerTrs:null===(i=F.value)||void 0===i?void 0:i.C_LimitPerTrs}).then(e=>{if(e){null!==e&&void 0!==e&&e.BussNo&&(a=e.BussNo,V.value=a),A("transferSetting/setUKeyLimitRequestParms",["SceneCode","MobileUsrActLimitMng"]),A("transferSetting/setUKeyLimitRequestParms",["BussNo",a]);var i=(null===e||void 0===e?void 0:e.WarningMsg)||"您的交易存在风险，为了进一步保护您的账户安全，请您谨慎操作！";if(M.value=null===e||void 0===e?void 0:e.AuthFlag,"0"==(null===e||void 0===e?void 0:e.AuthFlag))te(i);else if("1"==(null===e||void 0===e?void 0:e.AuthFlag)){var o=null===e||void 0===e?void 0:e.AuthCountryCode,n=null===e||void 0===e?void 0:e.AuthCifName,s=null===e||void 0===e?void 0:e.AuthBirthDate;l.value={AuthCountryCode:o,AuthCifName:n,AuthBirthDate:s},t.value=!1}else"2"==(null===e||void 0===e?void 0:e.AuthFlag)?te(i):"3"==(null===e||void 0===e?void 0:e.AuthFlag)?ie():m.log("failed....")}})},te=e=>{q.value=e,W.value=!0},le=()=>{W.value=!1,u.sendNativeInstrution("identityCheck",{SceneCode:"MobileUsrActLimitMng",BussNo:V.value},e=>{var t,l=JSON.parse(e);(null===Object||void 0===Object||null===(t=Object.keys(l))||void 0===t?void 0:t.length)>0&&"000000"==(null===l||void 0===l?void 0:l.rtnCode)?ie():m.log("user cancel..")})},ie=()=>{K.value=w.transferSetting.PayegisDID,K.value.TransFaceCode="xgxe";try{r.GL(K.value).then(e=>{e&&"000000"!=e&&(W.value=!1,X.value=!1,N.push({path:"/SMSVerification",query:{limitType:"ukey"}}))})}catch(e){m.log("err:",e)}};return(e,n)=>{var s=(0,i.g2)("van-icon"),u=(0,i.g2)("van-field"),r=(0,i.g2)("van-cell"),v=(0,i.g2)("van-cell-group"),c=(0,i.g2)("van-checkbox"),m=(0,i.g2)("van-button"),w=(0,i.g2)("van-popup"),A=(0,i.g2)("content-box");return(0,i.uX)(),(0,i.Wv)(A,{class:"container",title:"转账限额设置"},{default:(0,i.k6)(()=>[(0,i.Lk)("div",p,[(0,i.bF)(v,null,{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(r,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",k,[n[10]||(n[10]=(0,i.Lk)("div",{class:"title"},"单笔转账限额",-1)),(0,i.Lk)("div",y,[(0,i.bF)(u,{modelValue:T.value,"onUpdate:modelValue":n[0]||(n[0]=e=>T.value=e),placeholder:"单笔转账限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(s,{name:"close",onClick:Y,class:(0,a.C4)({hidden:(null===(e=T.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...n[11]||(n[11]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(r,{title:"单笔转账限额:"+(null===(e=F.value)||void 0===e?void 0:e.C_LimitPerTrs)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",g,[(0,i.bF)(v,{class:"my-group"},{default:(0,i.k6)(()=>{var e;return[(0,i.bF)(r,{class:"my-cell"},{title:(0,i.k6)(()=>[(0,i.Lk)("div",null,[(0,i.Lk)("div",L,[n[12]||(n[12]=(0,i.Lk)("div",{class:"title"},"日累计限额",-1)),(0,i.Lk)("div",f,[(0,i.bF)(u,{modelValue:x.value,"onUpdate:modelValue":n[1]||(n[1]=e=>x.value=e),placeholder:"日累计限额",type:"digit"},{"right-icon":(0,i.k6)(()=>{var e;return[(0,i.bF)(s,{name:"close",onClick:J,class:(0,a.C4)({hidden:(null===(e=x.value)||void 0===e?void 0:e.length)<=0})},null,8,["class"])]}),_:1},8,["modelValue"])])])])]),extra:(0,i.k6)(()=>[...n[13]||(n[13]=[(0,i.Lk)("div",{class:"unit-text"},"元",-1)])]),_:1}),(0,i.bF)(r,{title:"日累计转账限额:"+(null===(e=F.value)||void 0===e?void 0:e.C_LimitPerDay)+"元",class:"my-cell sub-title"},null,8,["title"])]}),_:1})]),(0,i.Lk)("div",h,[(0,i.bF)(c,{name:"1",modelValue:D.value,"onUpdate:modelValue":n[2]||(n[2]=e=>D.value=e)},{default:(0,i.k6)(()=>[n[14]||(n[14]=(0,i.eW)("我已阅读并同意 ",-1)),(0,i.Lk)("span",{class:"protocol-text",onClick:z}," 《泉州银行电子银行个人客户服务协议》 ")]),_:1},8,["modelValue"])]),(0,i.Lk)("div",b,[(0,i.bF)(m,{type:"primary","native-type":"submit",disabled:!j.value,onClick:G},{default:(0,i.k6)(()=>[...n[15]||(n[15]=[(0,i.eW)(" 修改限额 ",-1)])]),_:1},8,["disabled"])]),(0,i.bF)(w,{show:X.value,"onUpdate:show":n[3]||(n[3]=e=>X.value=e),round:"",closeable:"","close-on-click-overlay":!1},{default:(0,i.k6)(()=>[(0,i.Lk)("div",C,[n[17]||(n[17]=(0,i.Lk)("div",{class:"pop-title"},"需先进行认证验证",-1)),n[18]||(n[18]=(0,i.Lk)("div",{class:"pop-subtitle"},"请选择认证方式",-1)),(0,i.Lk)("div",_,[(0,i.bo)((0,i.bF)(m,{plain:"",type:"primary",block:"",onClick:$},{default:(0,i.k6)(()=>[...n[16]||(n[16]=[(0,i.eW)(" 手机短信 ",-1)])]),_:1},512),[[o.aG,"1"==B.value||"7"==B.value]])])])]),_:1},8,["show"]),(0,i.bF)(w,{show:W.value,"onUpdate:show":n[7]||(n[7]=e=>W.value=e),position:"center",round:"",style:{width:"80%"},onCancel:n[8]||(n[8]=e=>W.value=!1)},{default:(0,i.k6)(()=>[(0,i.Lk)("div",P,[n[22]||(n[22]=(0,i.Lk)("div",{class:"cm-popup-title"},"风险提示",-1)),(0,i.Lk)("div",R,[(0,i.Lk)("div",U,(0,a.v_)(q.value),1)]),(0,i.Lk)("div",S,[(0,i.bF)(m,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:n[4]||(n[4]=e=>W.value=!1)},{default:(0,i.k6)(()=>[...n[19]||(n[19]=[(0,i.eW)(" 取消 ",-1)])]),_:1}),"2"==M.value?((0,i.uX)(),(0,i.Wv)(m,{key:0,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:n[5]||(n[5]=e=>ie())},{default:(0,i.k6)(()=>[...n[20]||(n[20]=[(0,i.eW)(" 继续交易 ",-1)])]),_:1})):((0,i.uX)(),(0,i.Wv)(m,{key:1,type:"primary",class:"cm-foot-btn-normal",block:"",onClick:n[6]||(n[6]=e=>le())},{default:(0,i.k6)(()=>[...n[21]||(n[21]=[(0,i.eW)(" 身份核验 ",-1)])]),_:1}))]),n[23]||(n[23]=(0,i.Lk)("div",{class:"cm-popup-foot marginRow10",style:{"text-align":"left"}}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"]),(0,i.bF)(d.A,{showRemoteBankNotice:t.value,userInfo:l.value,transCode:"MobileUsrActLimitMng",onClose:n[9]||(n[9]=e=>t.value=!1)},null,8,["showRemoteBankNotice","userInfo"])]),_:1})}}},A=l(1169);const F=(0,A.A)(w,[["__scopeId","data-v-5e35659a"]]);var K=F},93336:function(e,t,l){l.d(t,{A:function(){return v}});l(62953),l(58335);var i=l(95976),a=l(12040),o=l(53620),n={class:"cm-popup-wrap"},s={class:"cm-popup-foot"},u={__name:"RemoteBank",props:{userInfo:{type:Object,default:()=>({})},transCode:{type:String,default:""},showRemoteBankNotice:{type:Boolean,default:!1}},emits:["close"],setup(e,t){var{emit:l}=t,u=l,{appContext:r}=(0,i.nI)(),{$qzbankBridge:v}=r.config.globalProperties,d=()=>{u("close")},c=e,m=(0,i.EW)(()=>c.showRemoteBankNotice),p=(0,a.KR)();(0,i.sV)(()=>{v.sendNativeInstrution("getUserAllData",{},e=>{p.value=JSON.parse(e)})});var k=(0,i.EW)(()=>{var e,t,l,i;return""!==(null===(e=p.value)||void 0===e?void 0:e.ycyhVersion)?"/client/mobile/index.html#/fileView?\n          transCode=".concat(encodeURIComponent("V03007"),"&transName=").concat(encodeURIComponent("身份核查"),"\n          &customerName=").concat(encodeURIComponent(null===(t=c.userInfo)||void 0===t?void 0:t.AuthCifName),"&countryCode=").concat(null===(l=c.userInfo)||void 0===l?void 0:l.AuthCountryCode,"\n          &businessType=").concat(encodeURIComponent(c.transCode),"&birthDay=").concat(encodeURIComponent(null===(i=c.userInfo)||void 0===i?void 0:i.AuthBirthDate),"\n          &transCheckName=").concat(encodeURIComponent("港澳台、中国护照客户身份核验"),"\n          "):(o.log("不支持核验"),"")}),y=()=>{var e={type:"2",url:k.value};v.sendNativeInstrution("toRemoteBank",e,()=>{o.log("remote data")})};return(e,t)=>{var l=(0,i.g2)("van-button"),a=(0,i.g2)("van-popup");return(0,i.uX)(),(0,i.Wv)(a,{show:m.value,"onUpdate:show":t[1]||(t[1]=e=>m.value=e),position:"center",round:"",style:{width:"80%"},onCancel:d},{default:(0,i.k6)(()=>[(0,i.Lk)("div",n,[t[4]||(t[4]=(0,i.Lk)("div",{class:"cm-popup-title"},"温馨提示",-1)),t[5]||(t[5]=(0,i.Lk)("div",{class:"cm-popup-content"},[(0,i.Lk)("div",{class:"cm-row-thre-title"}," 您当前的交易存在风险，请您准备好有效证件，并点击下方呼叫按钮进行身份核查。 ")],-1)),(0,i.Lk)("div",s,[(0,i.bF)(l,{type:"primary",class:"cm-foot-btn-defalut",plain:"",onClick:d},{default:(0,i.k6)(()=>[...t[2]||(t[2]=[(0,i.eW)(" 关闭 ",-1)])]),_:1}),(0,i.bF)(l,{type:"primary",class:"cm-foot-btn-normal",block:"",onClick:t[0]||(t[0]=e=>y())},{default:(0,i.k6)(()=>[...t[3]||(t[3]=[(0,i.eW)(" 呼叫客服 ",-1)])]),_:1})]),t[6]||(t[6]=(0,i.Lk)("div",{style:{"text-align":"left"},class:"marginRow10"}," 您也可至线下营业网点办理 ",-1))])]),_:1},8,["show"])}}};const r=u;var v=r}}]);